<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BPKH Limited - RAG Agentic AI Platform</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js for Live Dashboard -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Leaflet.js for Interactive Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- QRCode.js -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1e293b;
    }

    ::-webkit-scrollbar-thumb {
      background: #475569;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }

    .typing-indicator span {
      animation: blink 1.4s infinite both;
    }

    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes blink {

      0%,
      60%,
      100% {
        opacity: 0.3;
      }

      30% {
        opacity: 1;
      }
    }

    .wa-bubble {
      border-radius: 8px 8px 8px 0;
    }

    .wa-bubble-user {
      border-radius: 8px 8px 0 8px;
    }

    .pulse-dot {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.5;
      }
    }

    .custom-marker {
      background: transparent;
      border: none;
    }

    .leaflet-popup-content-wrapper {
      background: #1e293b;
      color: white;
      border-radius: 8px;
    }

    .leaflet-popup-tip {
      background: #1e293b;
    }

    .leaflet-popup-content {
      margin: 12px;
    }
  </style>
</head>

<body class="bg-slate-900">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ============ KONFIGURASI API ============
    const CONFIG = {
      // Groq API - Dapatkan gratis di: https://console.groq.com/keys
      GROQ_API_KEY: '', // Masukkan API key Anda di sini (gratis dari https://console.groq.com/keys)

      // Exchange Rate API (gratis, tanpa key)
      FOREX_API: 'https://api.exchangerate-api.com/v4/latest/SAR'
    };

    // ============ AI CHATBOT COMPONENT ============
    const AIChatbot = ({ isOpen, onClose }) => {
      const [messages, setMessages] = useState([
        { role: 'assistant', content: 'Assalamu\'alaikum! Saya asisten AI BPKH Limited. Silakan tanya tentang layanan hotel, transportasi, tiket kereta Haramain, atau katering kami. Saya bisa menjawab dalam Bahasa Indonesia atau ÿßŸÑÿπÿ±ÿ®Ÿäÿ©.' }
      ]);
      const [input, setInput] = useState('');
      const [isLoading, setIsLoading] = useState(false);
      const messagesEndRef = useRef(null);

      const scrollToBottom = () => {
        messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
      };

      useEffect(() => {
        scrollToBottom();
      }, [messages]);

      const systemPrompt = `Anda adalah asisten AI BPKH Limited, perusahaan layanan haji/umrah di Arab Saudi.
Anda HARUS menjawab dalam bahasa yang sama dengan pertanyaan user (Indonesia/Arab/Inggris).

Layanan BPKH Limited:
1. AKOMODASI: Hotel di Mekkah (Dar Al-Tawhid 850 SAR/malam, Al-Safwa 650 SAR/malam) dan Madinah
2. TRANSPORTASI: Bus shuttle antar lokasi suci, bandara, dan hotel
3. TIKET KERETA: Haramain High Speed Railway (Mekkah-Madinah 2.5 jam, 150-300 SAR)
4. KATERING: Makanan halal berkualitas, menu Indonesia dan Arab

Kurs: 1 SAR = Rp 4,200 (update real-time di dashboard)

Jawab dengan ramah, singkat, dan helpful. Gunakan emoji yang relevan.`;

      const sendMessage = async () => {
        if (!input.trim()) return;

        const userMessage = { role: 'user', content: input };
        setMessages(prev => [...prev, userMessage]);
        setInput('');
        setIsLoading(true);

        // Jika tidak ada API key, gunakan respons simulasi
        if (!CONFIG.GROQ_API_KEY) {
          setTimeout(() => {
            const simulatedResponses = {
              hotel: 'üè® Untuk reservasi hotel, kami punya:\n\n‚Ä¢ **Dar Al-Tawhid** - 200m dari Masjidil Haram\n  üí∞ 850 SAR/malam (Rp 3.57 juta)\n\n‚Ä¢ **Al-Safwa Hotel** - 500m dari Haram\n  üí∞ 650 SAR/malam (Rp 2.73 juta)\n\nSemua termasuk sarapan dan shuttle gratis ke Haram. Mau saya bantu booking?',
              kereta: 'üöÑ **Haramain High Speed Railway**\n\nRute: Mekkah ‚Üî Madinah\n‚è±Ô∏è Waktu tempuh: 2.5 jam\n\nüí∞ Harga tiket:\n‚Ä¢ Economy: 150 SAR (Rp 630rb)\n‚Ä¢ Business: 250 SAR (Rp 1.05jt)\n‚Ä¢ First Class: 300 SAR (Rp 1.26jt)\n\nJadwal: Setiap 30 menit dari jam 06:00-22:00',
              bus: 'üöå **Layanan Transportasi Bus**\n\n‚Ä¢ Shuttle Haram - Hotel: GRATIS\n‚Ä¢ Bandara Jeddah - Mekkah: 80 SAR\n‚Ä¢ Mekkah - Madinah (via darat): 200 SAR\n\nBus ber-AC dengan kapasitas 45 orang.',
              katering: 'üçΩÔ∏è **Layanan Katering Halal**\n\nPaket tersedia:\n‚Ä¢ Sarapan: 25 SAR/orang\n‚Ä¢ Makan Siang: 40 SAR/orang\n‚Ä¢ Makan Malam: 45 SAR/orang\n‚Ä¢ Full Board: 100 SAR/hari\n\nMenu Indonesia & Arab tersedia!',
              default: 'Terima kasih atas pertanyaannya! üòä\n\nUntuk informasi lebih detail, silakan tanyakan tentang:\n‚Ä¢ üè® Hotel & Akomodasi\n‚Ä¢ üöÑ Tiket Kereta Haramain\n‚Ä¢ üöå Transportasi Bus\n‚Ä¢ üçΩÔ∏è Katering\n\nAtau hubungi CS kami di WhatsApp: +966-xxx-xxxx'
            };

            const lowerInput = input.toLowerCase();
            let response = simulatedResponses.default;

            if (lowerInput.includes('hotel') || lowerInput.includes('kamar') || lowerInput.includes('akomodasi') || lowerInput.includes('ŸÅŸÜÿØŸÇ')) {
              response = simulatedResponses.hotel;
            } else if (lowerInput.includes('kereta') || lowerInput.includes('haramain') || lowerInput.includes('train') || lowerInput.includes('ŸÇÿ∑ÿßÿ±')) {
              response = simulatedResponses.kereta;
            } else if (lowerInput.includes('bus') || lowerInput.includes('transport') || lowerInput.includes('shuttle') || lowerInput.includes('ÿ≠ÿßŸÅŸÑÿ©')) {
              response = simulatedResponses.bus;
            } else if (lowerInput.includes('makan') || lowerInput.includes('katering') || lowerInput.includes('catering') || lowerInput.includes('ÿ∑ÿπÿßŸÖ')) {
              response = simulatedResponses.katering;
            }

            setMessages(prev => [...prev, { role: 'assistant', content: response }]);
            setIsLoading(false);
          }, 1000);
          return;
        }

        // Panggil Groq API
        try {
          const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${CONFIG.GROQ_API_KEY}`,
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              model: 'llama-3.3-70b-versatile',
              messages: [
                { role: 'system', content: systemPrompt },
                ...messages.map(m => ({ role: m.role, content: m.content })),
                userMessage
              ],
              temperature: 0.7,
              max_tokens: 500
            }),
          });

          const data = await response.json();
          const assistantMessage = data.choices[0].message.content;
          setMessages(prev => [...prev, { role: 'assistant', content: assistantMessage }]);
        } catch (error) {
          setMessages(prev => [...prev, { role: 'assistant', content: 'Maaf, terjadi kesalahan. Silakan coba lagi.' }]);
        }

        setIsLoading(false);
      };

      if (!isOpen) return null;

      return (
        <div className="fixed bottom-4 right-4 w-96 h-[500px] bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 flex flex-col z-50">
          {/* Header */}
          <div className="bg-gradient-to-r from-teal-600 to-emerald-600 p-4 rounded-t-2xl flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">ü§ñ</div>
              <div>
                <div className="text-white font-semibold">BPKH AI Assistant</div>
                <div className="text-teal-100 text-xs flex items-center gap-1">
                  <span className="w-2 h-2 bg-green-400 rounded-full pulse-dot"></span>
                  {CONFIG.GROQ_API_KEY ? 'Groq Llama 3.3 70B' : 'Demo Mode'}
                </div>
              </div>
            </div>
            <button onClick={onClose} className="text-white/80 hover:text-white text-xl">‚úï</button>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-3">
            {messages.map((msg, idx) => (
              <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                <div className={`max-w-[80%] p-3 rounded-lg text-sm whitespace-pre-wrap ${msg.role === 'user'
                    ? 'bg-teal-600 text-white rounded-br-none'
                    : 'bg-slate-700 text-slate-200 rounded-bl-none'
                  }`}>
                  {msg.content}
                </div>
              </div>
            ))}
            {isLoading && (
              <div className="flex justify-start">
                <div className="bg-slate-700 p-3 rounded-lg rounded-bl-none">
                  <div className="typing-indicator flex gap-1">
                    <span className="w-2 h-2 bg-slate-400 rounded-full"></span>
                    <span className="w-2 h-2 bg-slate-400 rounded-full"></span>
                    <span className="w-2 h-2 bg-slate-400 rounded-full"></span>
                  </div>
                </div>
              </div>
            )}
            <div ref={messagesEndRef} />
          </div>

          {/* Input */}
          <div className="p-4 border-t border-slate-700">
            <div className="flex gap-2">
              <input
                type="text"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                placeholder="Ketik pertanyaan..."
                className="flex-1 bg-slate-700 text-white rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500"
              />
              <button
                onClick={sendMessage}
                disabled={isLoading}
                className="bg-teal-600 hover:bg-teal-500 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50"
              >
                ‚û§
              </button>
            </div>
            {!CONFIG.GROQ_API_KEY && (
              <div className="text-xs text-slate-500 mt-2 text-center">
                üí° Tambahkan GROQ_API_KEY untuk AI response penuh
              </div>
            )}
          </div>
        </div>
      );
    };

    // ============ WHATSAPP SIMULATOR ============
    const WhatsAppSimulator = ({ isOpen, onClose }) => {
      const [messages, setMessages] = useState([]);
      const [currentStep, setCurrentStep] = useState(0);
      const [isTyping, setIsTyping] = useState(false);

      const conversation = [
        { sender: 'user', text: 'ÿ£ÿ±ŸäÿØ ÿ≠ÿ¨ÿ≤ ÿ∫ÿ±ŸÅÿ© ŸÅŸä ŸÅŸÜÿØŸÇ ŸÇÿ±Ÿäÿ® ŸÖŸÜ ÿßŸÑÿ≠ÿ±ŸÖ', lang: 'ar' },
        { sender: 'bot', text: 'ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ! üïå\n\nŸäÿ≥ÿπÿØŸÜŸä ŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ŸÅŸä ÿ≠ÿ¨ÿ≤ ÿ∫ÿ±ŸÅÿ© ŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜ ÿßŸÑÿ≠ÿ±ŸÖ ÿßŸÑŸÖŸÉŸä.\n\nŸÑÿØŸäŸÜÿß ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ©:\n\nüè® ŸÅŸÜÿØŸÇ ÿØÿßÿ± ÿßŸÑÿ™Ÿàÿ≠ŸäÿØ\nüìç 200ŸÖ ŸÖŸÜ ÿßŸÑÿ≠ÿ±ŸÖ\nüí∞ 850 ÿ±ŸäÿßŸÑ/ŸÑŸäŸÑÿ©\n\nüè® ŸÅŸÜÿØŸÇ ÿßŸÑÿµŸÅŸàÿ©\nüìç 500ŸÖ ŸÖŸÜ ÿßŸÑÿ≠ÿ±ŸÖ\nüí∞ 650 ÿ±ŸäÿßŸÑ/ŸÑŸäŸÑÿ©', lang: 'ar' },
        { sender: 'user', text: 'Saya mau yang lebih murah', lang: 'id' },
        { sender: 'bot', text: 'Baik Pak/Bu! üòä\n\nUntuk pilihan lebih ekonomis:\n\nüè® Hotel Al-Safwa\nüìç 500m dari Masjidil Haram\nüí∞ 650 SAR/malam\n   (‚âà Rp 2.730.000)\n\n‚úÖ Termasuk:\n‚Ä¢ Sarapan\n‚Ä¢ WiFi gratis\n‚Ä¢ Shuttle ke Haram\n\nApakah mau saya proses reservasinya?', lang: 'id' },
        { sender: 'user', text: 'Ya, tolong booking untuk 3 malam', lang: 'id' },
        { sender: 'bot', text: '‚úÖ Reservasi Berhasil!\n\nüìã Detail Booking:\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüè® Hotel Al-Safwa\nüìÖ Check-in: 15 Jan 2025\nüìÖ Check-out: 18 Jan 2025\nüåô 3 malam\n\nüí∞ Total: 1,950 SAR\n   (‚âà Rp 8.190.000)\n\nüì± Konfirmasi dikirim ke WhatsApp Anda.\n\nTerima kasih telah menggunakan BPKH Limited! ü§≤', lang: 'id' }
      ];

      const simulateConversation = () => {
        if (currentStep >= conversation.length) {
          setCurrentStep(0);
          setMessages([]);
          return;
        }

        const msg = conversation[currentStep];

        if (msg.sender === 'bot') {
          setIsTyping(true);
          setTimeout(() => {
            setIsTyping(false);
            setMessages(prev => [...prev, msg]);
            setCurrentStep(prev => prev + 1);
          }, 1500);
        } else {
          setMessages(prev => [...prev, msg]);
          setCurrentStep(prev => prev + 1);
        }
      };

      useEffect(() => {
        if (isOpen && currentStep < conversation.length) {
          const timer = setTimeout(simulateConversation, currentStep === 0 ? 500 : 2000);
          return () => clearTimeout(timer);
        }
      }, [isOpen, currentStep, messages]);

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-md bg-slate-800 rounded-2xl shadow-2xl overflow-hidden">
            {/* WhatsApp Header */}
            <div className="bg-[#075E54] p-4 flex items-center gap-3">
              <button onClick={onClose} className="text-white">‚Üê</button>
              <div className="w-10 h-10 bg-teal-400 rounded-full flex items-center justify-center text-white font-bold">B</div>
              <div className="flex-1">
                <div className="text-white font-semibold">BPKH Limited Bot</div>
                <div className="text-green-200 text-xs">{isTyping ? 'typing...' : 'online'}</div>
              </div>
              <button onClick={() => { setCurrentStep(0); setMessages([]); }} className="text-white/80 text-sm">‚Üª Reset</button>
            </div>

            {/* Chat Area */}
            <div className="h-96 bg-[#0B141A] bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMSIgZmlsbD0iIzBkMWIyNCIvPjwvc3ZnPg==')] p-4 overflow-y-auto space-y-2">
              {messages.map((msg, idx) => (
                <div key={idx} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                  <div className={`max-w-[85%] p-3 text-sm whitespace-pre-wrap ${msg.sender === 'user'
                      ? 'bg-[#005C4B] text-white wa-bubble-user'
                      : 'bg-[#1F2C34] text-white wa-bubble'
                    }`} dir={msg.lang === 'ar' ? 'rtl' : 'ltr'}>
                    {msg.text}
                    <div className={`text-[10px] text-slate-400 mt-1 ${msg.sender === 'user' ? 'text-right' : 'text-left'}`}>
                      {new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })}
                      {msg.sender === 'user' && ' ‚úì‚úì'}
                    </div>
                  </div>
                </div>
              ))}
              {isTyping && (
                <div className="flex justify-start">
                  <div className="bg-[#1F2C34] p-3 wa-bubble">
                    <div className="typing-indicator flex gap-1">
                      <span className="w-2 h-2 bg-slate-400 rounded-full"></span>
                      <span className="w-2 h-2 bg-slate-400 rounded-full"></span>
                      <span className="w-2 h-2 bg-slate-400 rounded-full"></span>
                    </div>
                  </div>
                </div>
              )}
            </div>

            {/* Footer */}
            <div className="bg-[#1F2C34] p-3 flex items-center gap-2">
              <div className="flex-1 bg-[#2A3942] rounded-full px-4 py-2 text-slate-400 text-sm">
                Demo otomatis berjalan...
              </div>
              <div className="w-10 h-10 bg-[#00A884] rounded-full flex items-center justify-center text-white">
                üé§
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ LIVE CHARTS COMPONENT ============
    const LiveCharts = ({ isOpen, onClose }) => {
      const chartRef1 = useRef(null);
      const chartRef2 = useRef(null);
      const chartRef3 = useRef(null);
      const [charts, setCharts] = useState([]);

      useEffect(() => {
        if (isOpen && chartRef1.current && chartRef2.current && chartRef3.current) {
          // Destroy existing charts
          charts.forEach(chart => chart.destroy());

          // Revenue Chart (Line)
          const ctx1 = chartRef1.current.getContext('2d');
          const chart1 = new Chart(ctx1, {
            type: 'line',
            data: {
              labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
              datasets: [{
                label: 'Revenue (M SAR)',
                data: [8.2, 9.1, 7.8, 10.5, 12.3, 15.8, 18.2, 22.5, 19.8, 14.2, 11.5, 10.1],
                borderColor: '#14b8a6',
                backgroundColor: 'rgba(20, 184, 166, 0.1)',
                fill: true,
                tension: 0.4
              }, {
                label: 'Target (M SAR)',
                data: [10, 10, 10, 12, 14, 16, 20, 24, 20, 15, 12, 10],
                borderColor: '#f59e0b',
                borderDash: [5, 5],
                fill: false,
                tension: 0.4
              }]
            },
            options: {
              responsive: true,
              plugins: { legend: { labels: { color: '#94a3b8' } } },
              scales: {
                x: { ticks: { color: '#64748b' }, grid: { color: '#334155' } },
                y: { ticks: { color: '#64748b' }, grid: { color: '#334155' } }
              },
              animation: { duration: 2000, easing: 'easeOutQuart' }
            }
          });

          // Budget Distribution (Doughnut)
          const ctx2 = chartRef2.current.getContext('2d');
          const chart2 = new Chart(ctx2, {
            type: 'doughnut',
            data: {
              labels: ['Akomodasi', 'Transportasi', 'Katering', 'Tiket Kereta'],
              datasets: [{
                data: [45, 30, 35, 15.8],
                backgroundColor: ['#10b981', '#3b82f6', '#f59e0b', '#8b5cf6'],
                borderColor: '#1e293b',
                borderWidth: 3
              }]
            },
            options: {
              responsive: true,
              plugins: {
                legend: { position: 'bottom', labels: { color: '#94a3b8', padding: 15 } }
              },
              animation: { animateRotate: true, duration: 1500 }
            }
          });

          // KPI Performance (Bar)
          const ctx3 = chartRef3.current.getContext('2d');
          const chart3 = new Chart(ctx3, {
            type: 'bar',
            data: {
              labels: ['SLA', 'CSAT', 'Response Time', 'Resolution', 'Efficiency'],
              datasets: [{
                label: 'Actual',
                data: [92, 88, 85, 90, 87],
                backgroundColor: '#14b8a6',
                borderRadius: 6
              }, {
                label: 'Target',
                data: [90, 85, 80, 85, 85],
                backgroundColor: '#475569',
                borderRadius: 6
              }]
            },
            options: {
              responsive: true,
              plugins: { legend: { labels: { color: '#94a3b8' } } },
              scales: {
                x: { ticks: { color: '#64748b' }, grid: { display: false } },
                y: { ticks: { color: '#64748b' }, grid: { color: '#334155' }, max: 100 }
              },
              animation: { duration: 1500, easing: 'easeOutBounce' }
            }
          });

          setCharts([chart1, chart2, chart3]);
        }

        return () => {
          charts.forEach(chart => chart.destroy());
        };
      }, [isOpen]);

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-6xl bg-slate-800 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto">
            <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-4 flex items-center justify-between sticky top-0">
              <div className="flex items-center gap-3">
                <span className="text-2xl">üìä</span>
                <div>
                  <div className="text-white font-bold text-lg">Live Dashboard Charts</div>
                  <div className="text-indigo-200 text-sm">Real-time KPI & Budget Analytics</div>
                </div>
              </div>
              <button onClick={onClose} className="text-white/80 hover:text-white text-2xl">‚úï</button>
            </div>

            <div className="p-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
              {/* Revenue Chart */}
              <div className="lg:col-span-2 bg-slate-900/50 rounded-xl p-4 border border-slate-700">
                <h3 className="text-white font-semibold mb-4">üìà Revenue vs Target (2024)</h3>
                <canvas ref={chartRef1} height="100"></canvas>
              </div>

              {/* Budget Distribution */}
              <div className="bg-slate-900/50 rounded-xl p-4 border border-slate-700">
                <h3 className="text-white font-semibold mb-4">üí∞ Budget Distribution (M SAR)</h3>
                <canvas ref={chartRef2}></canvas>
              </div>

              {/* KPI Performance */}
              <div className="bg-slate-900/50 rounded-xl p-4 border border-slate-700">
                <h3 className="text-white font-semibold mb-4">üéØ KPI Performance (%)</h3>
                <canvas ref={chartRef3}></canvas>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ HOTEL MAP COMPONENT ============
    const HotelMap = ({ isOpen, onClose }) => {
      const mapRef = useRef(null);
      const mapInstance = useRef(null);

      const hotels = [
        { name: 'Dar Al-Tawhid Intercontinental', lat: 21.4225, lng: 39.8262, distance: '200m', price: '850 SAR', rating: 5 },
        { name: 'Swissotel Al Maqam', lat: 21.4218, lng: 39.8268, distance: '150m', price: '920 SAR', rating: 5 },
        { name: 'Al-Safwa Hotel', lat: 21.4195, lng: 39.8245, distance: '500m', price: '650 SAR', rating: 4 },
        { name: 'Pullman ZamZam', lat: 21.4230, lng: 39.8258, distance: '100m', price: '780 SAR', rating: 5 },
        { name: 'Anjum Hotel', lat: 21.4205, lng: 39.8275, distance: '350m', price: '550 SAR', rating: 4 }
      ];

      useEffect(() => {
        if (isOpen && mapRef.current && !mapInstance.current) {
          // Initialize map centered on Masjidil Haram
          mapInstance.current = L.map(mapRef.current).setView([21.4225, 39.8262], 16);

          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap'
          }).addTo(mapInstance.current);

          // Masjidil Haram marker
          const haramIcon = L.divIcon({
            html: '<div style="font-size: 30px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">üïã</div>',
            className: 'custom-marker',
            iconSize: [40, 40],
            iconAnchor: [20, 20]
          });
          L.marker([21.4225, 39.8262], { icon: haramIcon })
            .addTo(mapInstance.current)
            .bindPopup('<b>üïã Masjidil Haram</b><br>Pusat Ibadah Umat Islam');

          // Hotel markers
          hotels.forEach(hotel => {
            const hotelIcon = L.divIcon({
              html: '<div style="font-size: 24px;">üè®</div>',
              className: 'custom-marker',
              iconSize: [30, 30],
              iconAnchor: [15, 15]
            });
            L.marker([hotel.lat, hotel.lng], { icon: hotelIcon })
              .addTo(mapInstance.current)
              .bindPopup(`
                <b>${hotel.name}</b><br>
                üìç ${hotel.distance} dari Haram<br>
                üí∞ ${hotel.price}/malam<br>
                ‚≠ê ${'‚òÖ'.repeat(hotel.rating)}
              `);
          });
        }

        return () => {
          if (mapInstance.current) {
            mapInstance.current.remove();
            mapInstance.current = null;
          }
        };
      }, [isOpen]);

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-4xl bg-slate-800 rounded-2xl shadow-2xl overflow-hidden">
            <div className="bg-gradient-to-r from-emerald-600 to-teal-600 p-4 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <span className="text-2xl">üó∫Ô∏è</span>
                <div>
                  <div className="text-white font-bold text-lg">Peta Hotel Mekkah</div>
                  <div className="text-emerald-200 text-sm">Lokasi hotel partner BPKH Limited</div>
                </div>
              </div>
              <button onClick={onClose} className="text-white/80 hover:text-white text-2xl">‚úï</button>
            </div>

            <div className="p-4">
              <div ref={mapRef} className="h-96 rounded-xl overflow-hidden border border-slate-700"></div>

              {/* Hotel List */}
              <div className="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
                {hotels.map((hotel, idx) => (
                  <div key={idx} className="bg-slate-900/50 rounded-lg p-3 border border-slate-700 flex items-center gap-3">
                    <span className="text-2xl">üè®</span>
                    <div className="flex-1">
                      <div className="text-white text-sm font-medium">{hotel.name}</div>
                      <div className="text-slate-400 text-xs">üìç {hotel.distance} ‚Ä¢ ‚≠ê {hotel.rating}</div>
                    </div>
                    <div className="text-emerald-400 font-bold">{hotel.price}</div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ BOOKING QR CODE COMPONENT ============
    const BookingQRCode = ({ isOpen, onClose }) => {
      const [bookingData, setBookingData] = useState({
        name: 'Ahmad Hidayat',
        hotel: 'Al-Safwa Hotel',
        checkIn: '2025-03-15',
        checkOut: '2025-03-18',
        nights: 3,
        roomType: 'Deluxe Twin',
        totalSAR: 1950,
        bookingId: 'BPKH-2025-' + Math.random().toString(36).substr(2, 8).toUpperCase()
      });
      const qrRef = useRef(null);
      const [qrGenerated, setQrGenerated] = useState(false);

      useEffect(() => {
        if (isOpen && qrRef.current && !qrGenerated) {
          const qrData = JSON.stringify({
            id: bookingData.bookingId,
            guest: bookingData.name,
            hotel: bookingData.hotel,
            dates: `${bookingData.checkIn} to ${bookingData.checkOut}`,
            total: `${bookingData.totalSAR} SAR`
          });

          QRCode.toCanvas(qrRef.current, qrData, {
            width: 200,
            margin: 2,
            color: {
              dark: '#0d9488',
              light: '#1e293b'
            }
          }, function(error) {
            if (!error) setQrGenerated(true);
          });
        }
      }, [isOpen]);

      useEffect(() => {
        if (!isOpen) setQrGenerated(false);
      }, [isOpen]);

      if (!isOpen) return null;

      const forexRate = 4200;

      return (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-md bg-slate-800 rounded-2xl shadow-2xl overflow-hidden">
            <div className="bg-gradient-to-r from-amber-600 to-orange-600 p-4 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <span className="text-2xl">üé´</span>
                <div>
                  <div className="text-white font-bold text-lg">Booking Confirmation</div>
                  <div className="text-amber-200 text-sm">QR Code untuk Check-in</div>
                </div>
              </div>
              <button onClick={onClose} className="text-white/80 hover:text-white text-2xl">‚úï</button>
            </div>

            <div className="p-6">
              {/* QR Code */}
              <div className="flex justify-center mb-6">
                <div className="bg-slate-900 p-4 rounded-xl border-2 border-teal-500/50">
                  <canvas ref={qrRef}></canvas>
                </div>
              </div>

              {/* Booking ID */}
              <div className="text-center mb-6">
                <div className="text-slate-400 text-sm">Booking ID</div>
                <div className="text-teal-400 font-mono text-xl font-bold">{bookingData.bookingId}</div>
              </div>

              {/* Booking Details */}
              <div className="bg-slate-900/50 rounded-xl p-4 border border-slate-700 space-y-3">
                <div className="flex justify-between">
                  <span className="text-slate-400">Tamu</span>
                  <span className="text-white font-medium">{bookingData.name}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-slate-400">Hotel</span>
                  <span className="text-white font-medium">{bookingData.hotel}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-slate-400">Tipe Kamar</span>
                  <span className="text-white font-medium">{bookingData.roomType}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-slate-400">Check-in</span>
                  <span className="text-white font-medium">{bookingData.checkIn}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-slate-400">Check-out</span>
                  <span className="text-white font-medium">{bookingData.checkOut}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-slate-400">Durasi</span>
                  <span className="text-white font-medium">{bookingData.nights} malam</span>
                </div>
                <hr className="border-slate-700" />
                <div className="flex justify-between items-center">
                  <span className="text-slate-400">Total</span>
                  <div className="text-right">
                    <div className="text-emerald-400 font-bold text-xl">{bookingData.totalSAR.toLocaleString()} SAR</div>
                    <div className="text-slate-500 text-sm">‚âà Rp {(bookingData.totalSAR * forexRate).toLocaleString('id-ID')}</div>
                  </div>
                </div>
              </div>

              {/* Status */}
              <div className="mt-4 bg-emerald-900/30 rounded-lg p-3 border border-emerald-600/30 flex items-center gap-3">
                <span className="text-2xl">‚úÖ</span>
                <div>
                  <div className="text-emerald-400 font-semibold">Booking Confirmed</div>
                  <div className="text-slate-400 text-sm">Tunjukkan QR code ini saat check-in</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ PRAYER TIME WIDGET ============
    const PrayerTimeWidget = ({ isOpen, onClose }) => {
      const [prayerTimes, setPrayerTimes] = useState(null);
      const [loading, setLoading] = useState(true);
      const [currentTime, setCurrentTime] = useState(new Date());
      const [nextPrayer, setNextPrayer] = useState(null);
      const [countdown, setCountdown] = useState('');

      const prayerNames = {
        Fajr: { ar: 'ÿßŸÑŸÅÿ¨ÿ±', id: 'Subuh', icon: 'üåÖ' },
        Sunrise: { ar: 'ÿßŸÑÿ¥ÿ±ŸàŸÇ', id: 'Syuruq', icon: '‚òÄÔ∏è' },
        Dhuhr: { ar: 'ÿßŸÑÿ∏Ÿáÿ±', id: 'Dzuhur', icon: 'üåû' },
        Asr: { ar: 'ÿßŸÑÿπÿµÿ±', id: 'Ashar', icon: 'üå§Ô∏è' },
        Maghrib: { ar: 'ÿßŸÑŸÖÿ∫ÿ±ÿ®', id: 'Maghrib', icon: 'üåÖ' },
        Isha: { ar: 'ÿßŸÑÿπÿ¥ÿßÿ°', id: 'Isya', icon: 'üåô' }
      };

      useEffect(() => {
        if (isOpen) {
          fetchPrayerTimes();
          const interval = setInterval(() => {
            setCurrentTime(new Date());
          }, 1000);
          return () => clearInterval(interval);
        }
      }, [isOpen]);

      useEffect(() => {
        if (prayerTimes) {
          calculateNextPrayer();
        }
      }, [currentTime, prayerTimes]);

      const fetchPrayerTimes = async () => {
        try {
          const today = new Date();
          const date = `${today.getDate()}-${today.getMonth() + 1}-${today.getFullYear()}`;
          const response = await fetch(`https://api.aladhan.com/v1/timings/${date}?latitude=21.4225&longitude=39.8262&method=4`);
          const data = await response.json();
          setPrayerTimes(data.data.timings);
          setLoading(false);
        } catch (error) {
          // Fallback times for Makkah
          setPrayerTimes({
            Fajr: '05:23', Sunrise: '06:43', Dhuhr: '12:27',
            Asr: '15:45', Maghrib: '18:11', Isha: '19:41'
          });
          setLoading(false);
        }
      };

      const calculateNextPrayer = () => {
        if (!prayerTimes) return;
        const now = currentTime;
        const prayers = ['Fajr', 'Sunrise', 'Dhuhr', 'Asr', 'Maghrib', 'Isha'];

        for (const prayer of prayers) {
          const [hours, minutes] = prayerTimes[prayer].split(':').map(Number);
          const prayerTime = new Date(now);
          prayerTime.setHours(hours, minutes, 0, 0);

          if (prayerTime > now) {
            setNextPrayer(prayer);
            const diff = prayerTime - now;
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            setCountdown(`${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`);
            return;
          }
        }
        setNextPrayer('Fajr');
        setCountdown('Tomorrow');
      };

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-md bg-slate-800 rounded-2xl shadow-2xl overflow-hidden">
            <div className="bg-gradient-to-r from-emerald-600 to-teal-600 p-4 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <span className="text-2xl">üïå</span>
                <div>
                  <div className="text-white font-bold text-lg">Jadwal Sholat Mekkah</div>
                  <div className="text-emerald-200 text-sm">Masjidil Haram</div>
                </div>
              </div>
              <button onClick={onClose} className="text-white/80 hover:text-white text-2xl">‚úï</button>
            </div>

            <div className="p-6">
              {/* Current Time */}
              <div className="text-center mb-6">
                <div className="text-slate-400 text-sm">Waktu Mekkah Sekarang</div>
                <div className="text-4xl font-bold text-white font-mono">
                  {currentTime.toLocaleTimeString('en-US', { timeZone: 'Asia/Riyadh', hour12: false })}
                </div>
                <div className="text-slate-500 text-sm">
                  {currentTime.toLocaleDateString('id-ID', { timeZone: 'Asia/Riyadh', weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' })}
                </div>
              </div>

              {/* Next Prayer Countdown */}
              {nextPrayer && (
                <div className="bg-gradient-to-r from-amber-900/50 to-orange-900/50 rounded-xl p-4 mb-6 border border-amber-600/30">
                  <div className="text-center">
                    <div className="text-amber-300 text-sm">Waktu Sholat Berikutnya</div>
                    <div className="text-2xl font-bold text-white flex items-center justify-center gap-2">
                      <span>{prayerNames[nextPrayer]?.icon}</span>
                      <span>{prayerNames[nextPrayer]?.id}</span>
                      <span className="text-amber-400 text-lg">({prayerNames[nextPrayer]?.ar})</span>
                    </div>
                    <div className="text-3xl font-mono text-amber-400 mt-2">{countdown}</div>
                  </div>
                </div>
              )}

              {/* Prayer Times Grid */}
              {loading ? (
                <div className="text-center text-slate-400">Memuat jadwal sholat...</div>
              ) : (
                <div className="grid grid-cols-2 gap-3">
                  {Object.entries(prayerNames).map(([key, value]) => (
                    <div key={key} className={`rounded-xl p-3 border ${nextPrayer === key ? 'bg-emerald-900/50 border-emerald-500' : 'bg-slate-900/50 border-slate-700'}`}>
                      <div className="flex items-center gap-2 mb-1">
                        <span>{value.icon}</span>
                        <span className="text-white font-medium">{value.id}</span>
                      </div>
                      <div className="text-slate-400 text-xs">{value.ar}</div>
                      <div className={`text-xl font-bold font-mono ${nextPrayer === key ? 'text-emerald-400' : 'text-white'}`}>
                        {prayerTimes?.[key] || '--:--'}
                      </div>
                    </div>
                  ))}
                </div>
              )}

              <div className="mt-4 text-center text-slate-500 text-xs">
                Data dari Aladhan API ‚Ä¢ Metode: Umm Al-Qura
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ WEATHER WIDGET ============
    const WeatherWidget = ({ isOpen, onClose }) => {
      const [weather, setWeather] = useState({ makkah: null, madinah: null });
      const [loading, setLoading] = useState(true);

      const cities = [
        { name: 'Mekkah', nameAr: 'ŸÖŸÉÿ© ÿßŸÑŸÖŸÉÿ±ŸÖÿ©', lat: 21.4225, lon: 39.8262, icon: 'üïã' },
        { name: 'Madinah', nameAr: 'ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÜŸàÿ±ÿ©', lat: 24.5247, lon: 39.5692, icon: 'üïå' }
      ];

      useEffect(() => {
        if (isOpen) {
          fetchWeather();
        }
      }, [isOpen]);

      const fetchWeather = async () => {
        try {
          // Using Open-Meteo API (free, no API key required)
          const results = await Promise.all(cities.map(async (city) => {
            const response = await fetch(
              `https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&timezone=Asia/Riyadh`
            );
            return response.json();
          }));

          setWeather({
            makkah: results[0].current,
            madinah: results[1].current
          });
          setLoading(false);
        } catch (error) {
          // Fallback data
          setWeather({
            makkah: { temperature_2m: 35, relative_humidity_2m: 25, weather_code: 0, wind_speed_10m: 12 },
            madinah: { temperature_2m: 33, relative_humidity_2m: 20, weather_code: 1, wind_speed_10m: 15 }
          });
          setLoading(false);
        }
      };

      const getWeatherIcon = (code) => {
        if (code === 0) return '‚òÄÔ∏è';
        if (code <= 3) return '‚õÖ';
        if (code <= 49) return 'üå´Ô∏è';
        if (code <= 69) return 'üåßÔ∏è';
        if (code <= 79) return 'üå®Ô∏è';
        if (code <= 99) return '‚õàÔ∏è';
        return '‚òÄÔ∏è';
      };

      const getWeatherDesc = (code) => {
        if (code === 0) return 'Cerah';
        if (code <= 3) return 'Berawan Sebagian';
        if (code <= 49) return 'Berkabut';
        if (code <= 69) return 'Hujan';
        if (code <= 79) return 'Hujan Salju';
        if (code <= 99) return 'Badai';
        return 'Cerah';
      };

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-lg bg-slate-800 rounded-2xl shadow-2xl overflow-hidden">
            <div className="bg-gradient-to-r from-blue-600 to-cyan-600 p-4 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <span className="text-2xl">‚òÅÔ∏è</span>
                <div>
                  <div className="text-white font-bold text-lg">Cuaca Tanah Suci</div>
                  <div className="text-blue-200 text-sm">Real-time Weather</div>
                </div>
              </div>
              <button onClick={onClose} className="text-white/80 hover:text-white text-2xl">‚úï</button>
            </div>

            <div className="p-6">
              {loading ? (
                <div className="text-center text-slate-400 py-8">Memuat data cuaca...</div>
              ) : (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {cities.map((city, idx) => {
                    const data = idx === 0 ? weather.makkah : weather.madinah;
                    return (
                      <div key={city.name} className="bg-slate-900/50 rounded-xl p-5 border border-slate-700">
                        <div className="flex items-center gap-3 mb-4">
                          <span className="text-3xl">{city.icon}</span>
                          <div>
                            <div className="text-white font-bold text-lg">{city.name}</div>
                            <div className="text-slate-400 text-sm">{city.nameAr}</div>
                          </div>
                        </div>

                        <div className="flex items-center justify-between mb-4">
                          <div className="text-5xl">{getWeatherIcon(data?.weather_code)}</div>
                          <div className="text-right">
                            <div className="text-4xl font-bold text-white">{Math.round(data?.temperature_2m)}¬∞C</div>
                            <div className="text-slate-400 text-sm">{getWeatherDesc(data?.weather_code)}</div>
                          </div>
                        </div>

                        <div className="grid grid-cols-2 gap-3">
                          <div className="bg-slate-800/50 rounded-lg p-2 text-center">
                            <div className="text-slate-400 text-xs">Kelembaban</div>
                            <div className="text-white font-bold">üíß {data?.relative_humidity_2m}%</div>
                          </div>
                          <div className="bg-slate-800/50 rounded-lg p-2 text-center">
                            <div className="text-slate-400 text-xs">Angin</div>
                            <div className="text-white font-bold">üí® {Math.round(data?.wind_speed_10m)} km/h</div>
                          </div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              )}

              {/* Tips for Jamaah */}
              <div className="mt-6 bg-amber-900/30 rounded-xl p-4 border border-amber-600/30">
                <div className="text-amber-400 font-semibold mb-2">üí° Tips untuk Jamaah</div>
                <ul className="text-slate-300 text-sm space-y-1">
                  <li>‚Ä¢ Bawa payung/topi untuk melindungi dari panas</li>
                  <li>‚Ä¢ Minum air minimal 2-3 liter per hari</li>
                  <li>‚Ä¢ Hindari aktivitas outdoor saat puncak panas (12:00-15:00)</li>
                  <li>‚Ä¢ Gunakan sunscreen SPF 50+</li>
                </ul>
              </div>

              <div className="mt-4 text-center text-slate-500 text-xs">
                Data dari Open-Meteo API ‚Ä¢ Update setiap 15 menit
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ CURRENCY CALCULATOR ============
    const CurrencyCalculator = ({ isOpen, onClose, forexRate }) => {
      const [amount, setAmount] = useState('');
      const [direction, setDirection] = useState('SAR_TO_IDR'); // or 'IDR_TO_SAR'
      const [result, setResult] = useState(null);

      const rate = forexRate?.rate || 4200;

      useEffect(() => {
        if (amount && !isNaN(amount)) {
          const numAmount = parseFloat(amount);
          if (direction === 'SAR_TO_IDR') {
            setResult({
              from: { value: numAmount, currency: 'SAR', symbol: 'ÿ±.ÿ≥' },
              to: { value: numAmount * rate, currency: 'IDR', symbol: 'Rp' }
            });
          } else {
            setResult({
              from: { value: numAmount, currency: 'IDR', symbol: 'Rp' },
              to: { value: numAmount / rate, currency: 'SAR', symbol: 'ÿ±.ÿ≥' }
            });
          }
        } else {
          setResult(null);
        }
      }, [amount, direction, rate]);

      const quickAmounts = direction === 'SAR_TO_IDR'
        ? [100, 500, 1000, 5000, 10000]
        : [500000, 1000000, 5000000, 10000000, 50000000];

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-md bg-slate-800 rounded-2xl shadow-2xl overflow-hidden">
            <div className="bg-gradient-to-r from-purple-600 to-pink-600 p-4 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <span className="text-2xl">üí±</span>
                <div>
                  <div className="text-white font-bold text-lg">Currency Calculator</div>
                  <div className="text-purple-200 text-sm">SAR ‚Üî IDR Converter</div>
                </div>
              </div>
              <button onClick={onClose} className="text-white/80 hover:text-white text-2xl">‚úï</button>
            </div>

            <div className="p-6">
              {/* Live Rate Banner */}
              <div className="bg-slate-900/50 rounded-xl p-4 mb-6 border border-slate-700 text-center">
                <div className="text-slate-400 text-sm">Kurs Live</div>
                <div className="text-2xl font-bold text-white">
                  1 SAR = <span className="text-emerald-400">Rp {rate.toLocaleString('id-ID')}</span>
                </div>
                <div className="text-slate-500 text-xs mt-1">
                  Update: {forexRate?.lastUpdate || 'Real-time'}
                </div>
              </div>

              {/* Direction Toggle */}
              <div className="flex gap-2 mb-4">
                <button
                  onClick={() => { setDirection('SAR_TO_IDR'); setAmount(''); }}
                  className={`flex-1 py-3 rounded-xl font-medium transition-all ${direction === 'SAR_TO_IDR' ? 'bg-emerald-600 text-white' : 'bg-slate-700 text-slate-300'}`}
                >
                  SAR ‚Üí IDR
                </button>
                <button
                  onClick={() => { setDirection('IDR_TO_SAR'); setAmount(''); }}
                  className={`flex-1 py-3 rounded-xl font-medium transition-all ${direction === 'IDR_TO_SAR' ? 'bg-emerald-600 text-white' : 'bg-slate-700 text-slate-300'}`}
                >
                  IDR ‚Üí SAR
                </button>
              </div>

              {/* Input */}
              <div className="mb-4">
                <label className="text-slate-400 text-sm mb-2 block">
                  Masukkan Jumlah ({direction === 'SAR_TO_IDR' ? 'SAR' : 'IDR'})
                </label>
                <div className="relative">
                  <span className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold">
                    {direction === 'SAR_TO_IDR' ? 'ÿ±.ÿ≥' : 'Rp'}
                  </span>
                  <input
                    type="number"
                    value={amount}
                    onChange={(e) => setAmount(e.target.value)}
                    placeholder="0"
                    className="w-full bg-slate-900 text-white text-2xl font-bold rounded-xl px-12 py-4 focus:outline-none focus:ring-2 focus:ring-emerald-500 text-right"
                  />
                </div>
              </div>

              {/* Quick Amounts */}
              <div className="flex flex-wrap gap-2 mb-6">
                {quickAmounts.map((amt) => (
                  <button
                    key={amt}
                    onClick={() => setAmount(amt.toString())}
                    className="bg-slate-700 hover:bg-slate-600 text-white px-3 py-1 rounded-lg text-sm transition-colors"
                  >
                    {direction === 'SAR_TO_IDR' ? amt.toLocaleString() : (amt / 1000000).toFixed(1) + 'jt'}
                  </button>
                ))}
              </div>

              {/* Result */}
              {result && (
                <div className="bg-gradient-to-r from-emerald-900/50 to-teal-900/50 rounded-xl p-6 border border-emerald-600/30">
                  <div className="text-center">
                    <div className="text-slate-400 text-sm mb-2">Hasil Konversi</div>
                    <div className="text-lg text-slate-300 mb-1">
                      {result.from.symbol} {result.from.value.toLocaleString(result.from.currency === 'IDR' ? 'id-ID' : 'en-US')} {result.from.currency}
                    </div>
                    <div className="text-2xl text-white">=</div>
                    <div className="text-3xl font-bold text-emerald-400">
                      {result.to.symbol} {result.to.value.toLocaleString(result.to.currency === 'IDR' ? 'id-ID' : 'en-US', { maximumFractionDigits: 2 })}
                    </div>
                    <div className="text-slate-400 text-sm mt-1">{result.to.currency}</div>
                  </div>
                </div>
              )}

              {/* Common Conversions */}
              <div className="mt-6">
                <div className="text-slate-400 text-sm mb-2">Referensi Cepat</div>
                <div className="grid grid-cols-2 gap-2 text-sm">
                  {[100, 500, 1000, 5000].map((sar) => (
                    <div key={sar} className="bg-slate-900/50 rounded-lg p-2 flex justify-between">
                      <span className="text-slate-400">{sar} SAR</span>
                      <span className="text-white">Rp {(sar * rate).toLocaleString('id-ID')}</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ HIJRI CALENDAR WIDGET ============
    const HijriCalendar = ({ isOpen, onClose }) => {
      const [hijriDate, setHijriDate] = useState(null);
      const [loading, setLoading] = useState(true);
      const [selectedMonth, setSelectedMonth] = useState(null);

      const hijriMonths = [
        { name: 'Muharram', ar: 'ŸÖÿ≠ÿ±ŸÖ', days: 30 },
        { name: 'Safar', ar: 'ÿµŸÅÿ±', days: 29 },
        { name: 'Rabiul Awal', ar: 'ÿ±ÿ®Ÿäÿπ ÿßŸÑÿ£ŸàŸÑ', days: 30 },
        { name: 'Rabiul Akhir', ar: 'ÿ±ÿ®Ÿäÿπ ÿßŸÑÿ¢ÿÆÿ±', days: 29 },
        { name: 'Jumadil Awal', ar: 'ÿ¨ŸÖÿßÿØŸâ ÿßŸÑÿ£ŸàŸÑŸâ', days: 30 },
        { name: 'Jumadil Akhir', ar: 'ÿ¨ŸÖÿßÿØŸâ ÿßŸÑÿ¢ÿÆÿ±ÿ©', days: 29 },
        { name: 'Rajab', ar: 'ÿ±ÿ¨ÿ®', days: 30 },
        { name: 'Syaban', ar: 'ÿ¥ÿπÿ®ÿßŸÜ', days: 29 },
        { name: 'Ramadhan', ar: 'ÿ±ŸÖÿ∂ÿßŸÜ', days: 30 },
        { name: 'Syawal', ar: 'ÿ¥ŸàÿßŸÑ', days: 29 },
        { name: 'Dzulqaidah', ar: 'ÿ∞Ÿà ÿßŸÑŸÇÿπÿØÿ©', days: 30 },
        { name: 'Dzulhijjah', ar: 'ÿ∞Ÿà ÿßŸÑÿ≠ÿ¨ÿ©', days: 29 }
      ];

      const importantDates = [
        { month: 1, day: 1, name: 'Tahun Baru Hijriyah', icon: 'üåô', type: 'holiday' },
        { month: 1, day: 10, name: 'Asyura', icon: 'üìø', type: 'sunnah' },
        { month: 3, day: 12, name: 'Maulid Nabi Ô∑∫', icon: 'üïå', type: 'holiday' },
        { month: 7, day: 27, name: 'Isra Miraj', icon: '‚ú®', type: 'holiday' },
        { month: 8, day: 15, name: 'Nisfu Syaban', icon: 'üåï', type: 'sunnah' },
        { month: 9, day: 1, name: 'Awal Ramadhan', icon: 'üåô', type: 'holiday' },
        { month: 9, day: 17, name: 'Nuzulul Quran', icon: 'üìñ', type: 'important' },
        { month: 9, day: 21, name: 'Lailatul Qadr (perkiraan)', icon: '‚≠ê', type: 'important' },
        { month: 9, day: 23, name: 'Lailatul Qadr (perkiraan)', icon: '‚≠ê', type: 'important' },
        { month: 9, day: 25, name: 'Lailatul Qadr (perkiraan)', icon: '‚≠ê', type: 'important' },
        { month: 9, day: 27, name: 'Lailatul Qadr (perkiraan)', icon: '‚≠ê', type: 'important' },
        { month: 9, day: 29, name: 'Lailatul Qadr (perkiraan)', icon: '‚≠ê', type: 'important' },
        { month: 10, day: 1, name: 'Idul Fitri', icon: 'üéâ', type: 'holiday' },
        { month: 12, day: 8, name: 'Hari Tarwiyah', icon: 'üïã', type: 'hajj' },
        { month: 12, day: 9, name: 'Wukuf di Arafah', icon: '‚õ∞Ô∏è', type: 'hajj' },
        { month: 12, day: 10, name: 'Idul Adha', icon: 'üê™', type: 'holiday' },
        { month: 12, day: 11, name: 'Hari Tasyrik 1', icon: 'üèïÔ∏è', type: 'hajj' },
        { month: 12, day: 12, name: 'Hari Tasyrik 2', icon: 'üèïÔ∏è', type: 'hajj' },
        { month: 12, day: 13, name: 'Hari Tasyrik 3', icon: 'üèïÔ∏è', type: 'hajj' }
      ];

      useEffect(() => {
        if (isOpen) {
          fetchHijriDate();
        }
      }, [isOpen]);

      const fetchHijriDate = async () => {
        try {
          const response = await fetch('https://api.aladhan.com/v1/gpipmortality/today?latitude=21.4225&longitude=39.8262');
          const data = await response.json();
          setHijriDate(data.data.hijri);
          setSelectedMonth(parseInt(data.data.hijri.month.number));
          setLoading(false);
        } catch (error) {
          // Fallback - calculate approximate Hijri date
          const today = new Date();
          const hijriApprox = {
            day: '15',
            month: { number: 7, en: 'Rajab', ar: 'ÿ±ÿ¨ÿ®' },
            year: '1446'
          };
          setHijriDate(hijriApprox);
          setSelectedMonth(7);
          setLoading(false);
        }
      };

      const getTypeColor = (type) => {
        switch(type) {
          case 'holiday': return 'bg-emerald-900/50 border-emerald-500 text-emerald-300';
          case 'hajj': return 'bg-amber-900/50 border-amber-500 text-amber-300';
          case 'sunnah': return 'bg-blue-900/50 border-blue-500 text-blue-300';
          case 'important': return 'bg-purple-900/50 border-purple-500 text-purple-300';
          default: return 'bg-slate-800 border-slate-600 text-slate-300';
        }
      };

      if (!isOpen) return null;

      const currentMonthDates = importantDates.filter(d => d.month === selectedMonth);

      return (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="w-full max-w-2xl bg-slate-800 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto">
            <div className="bg-gradient-to-r from-amber-600 to-yellow-600 p-4 flex items-center justify-between sticky top-0 z-10">
              <div className="flex items-center gap-3">
                <span className="text-2xl">üóìÔ∏è</span>
                <div>
                  <div className="text-white font-bold text-lg">Kalender Hijriyah</div>
                  <div className="text-amber-200 text-sm">ÿßŸÑÿ™ŸÇŸàŸäŸÖ ÿßŸÑŸáÿ¨ÿ±Ÿä</div>
                </div>
              </div>
              <button onClick={onClose} className="text-white/80 hover:text-white text-2xl">‚úï</button>
            </div>

            <div className="p-6">
              {/* Current Hijri Date */}
              {loading ? (
                <div className="text-center text-slate-400 py-4">Memuat kalender...</div>
              ) : (
                <div className="bg-gradient-to-r from-slate-900 to-slate-800 rounded-xl p-6 mb-6 border border-amber-600/30 text-center">
                  <div className="text-slate-400 text-sm mb-2">Tanggal Hijriyah Hari Ini</div>
                  <div className="text-5xl font-bold text-amber-400 mb-2">{hijriDate?.day}</div>
                  <div className="text-2xl text-white mb-1">
                    {hijriMonths[parseInt(hijriDate?.month?.number) - 1]?.name} {hijriDate?.year} H
                  </div>
                  <div className="text-xl text-amber-300/80 font-arabic">
                    {hijriDate?.month?.ar} {hijriDate?.year} ŸáŸÄ
                  </div>
                </div>
              )}

              {/* Month Selector */}
              <div className="mb-6">
                <div className="text-white font-semibold mb-3">Pilih Bulan</div>
                <div className="grid grid-cols-3 md:grid-cols-4 gap-2">
                  {hijriMonths.map((month, idx) => (
                    <button
                      key={idx}
                      onClick={() => setSelectedMonth(idx + 1)}
                      className={`p-2 rounded-lg text-sm transition-all ${selectedMonth === idx + 1
                        ? 'bg-amber-600 text-white'
                        : 'bg-slate-700 text-slate-300 hover:bg-slate-600'
                      }`}
                    >
                      <div className="font-medium">{month.name}</div>
                      <div className="text-xs opacity-70">{month.ar}</div>
                    </button>
                  ))}
                </div>
              </div>

              {/* Important Dates for Selected Month */}
              <div>
                <div className="text-white font-semibold mb-3">
                  Tanggal Penting di {hijriMonths[selectedMonth - 1]?.name}
                </div>
                {currentMonthDates.length > 0 ? (
                  <div className="space-y-2">
                    {currentMonthDates.map((date, idx) => (
                      <div key={idx} className={`rounded-lg p-3 border ${getTypeColor(date.type)} flex items-center gap-3`}>
                        <span className="text-2xl">{date.icon}</span>
                        <div className="flex-1">
                          <div className="font-medium">{date.name}</div>
                          <div className="text-sm opacity-70">{date.day} {hijriMonths[date.month - 1]?.name}</div>
                        </div>
                        <div className="text-xs px-2 py-1 rounded bg-black/20">
                          {date.type === 'holiday' && 'Hari Besar'}
                          {date.type === 'hajj' && 'Manasik Haji'}
                          {date.type === 'sunnah' && 'Sunnah'}
                          {date.type === 'important' && 'Penting'}
                        </div>
                      </div>
                    ))}
                  </div>
                ) : (
                  <div className="text-slate-500 text-center py-4 bg-slate-900/50 rounded-lg">
                    Tidak ada tanggal penting di bulan ini
                  </div>
                )}
              </div>

              {/* Legend */}
              <div className="mt-6 pt-4 border-t border-slate-700">
                <div className="text-slate-400 text-sm mb-2">Keterangan:</div>
                <div className="flex flex-wrap gap-2">
                  <span className="text-xs px-2 py-1 rounded bg-emerald-900/50 text-emerald-300 border border-emerald-600">Hari Besar Islam</span>
                  <span className="text-xs px-2 py-1 rounded bg-amber-900/50 text-amber-300 border border-amber-600">Manasik Haji</span>
                  <span className="text-xs px-2 py-1 rounded bg-blue-900/50 text-blue-300 border border-blue-600">Puasa Sunnah</span>
                  <span className="text-xs px-2 py-1 rounded bg-purple-900/50 text-purple-300 border border-purple-600">Malam Penting</span>
                </div>
              </div>

              <div className="mt-4 text-center text-slate-500 text-xs">
                Data dari Aladhan API ‚Ä¢ Kalender Umm Al-Qura
              </div>
            </div>
          </div>
        </div>
      );
    };

    // ============ MAIN APP ============
    const BPKHLimitedSolution = () => {
      const [activeModule, setActiveModule] = useState('overview');
      const [isLoaded, setIsLoaded] = useState(false);
      const [showChatbot, setShowChatbot] = useState(false);
      const [showWhatsApp, setShowWhatsApp] = useState(false);
      const [showCharts, setShowCharts] = useState(false);
      const [showMap, setShowMap] = useState(false);
      const [showQR, setShowQR] = useState(false);
      const [showPrayer, setShowPrayer] = useState(false);
      const [showWeather, setShowWeather] = useState(false);
      const [showCalculator, setShowCalculator] = useState(false);
      const [showHijri, setShowHijri] = useState(false);
      const [forexRate, setForexRate] = useState({ rate: 4200, loading: true, lastUpdate: null });

      useEffect(() => {
        setIsLoaded(true);
        fetchForexRate();
        const interval = setInterval(fetchForexRate, 60000); // Update setiap menit
        return () => clearInterval(interval);
      }, []);

      const fetchForexRate = async () => {
        try {
          // Menggunakan free API untuk kurs
          const response = await fetch('https://api.exchangerate-api.com/v4/latest/SAR');
          const data = await response.json();
          const idrRate = data.rates.IDR;
          setForexRate({
            rate: Math.round(idrRate),
            loading: false,
            lastUpdate: new Date().toLocaleTimeString('id-ID')
          });
        } catch (error) {
          // Fallback ke rate default jika API gagal
          setForexRate(prev => ({ ...prev, loading: false }));
        }
      };

      const formatIDR = (sar) => {
        return new Intl.NumberFormat('id-ID').format(sar * forexRate.rate);
      };

      const modules = [
        { id: 'overview', name: 'Executive Overview', icon: 'üìä', color: '#0D9488' },
        { id: 'customer', name: 'Bilingual Customer Service', icon: 'üéß', color: '#6366F1' },
        { id: 'planning', name: 'Corporate Planning', icon: 'üìà', color: '#F59E0B' },
        { id: 'performance', name: 'Performance Monitoring', icon: 'üéØ', color: '#EF4444' },
        { id: 'document', name: 'Document Intelligence', icon: 'üìÑ', color: '#10B981' },
        { id: 'implementation', name: 'Implementation Roadmap', icon: 'üöÄ', color: '#8B5CF6' }
      ];

      const portfolioServices = [
        { name: 'Akomodasi Haji & Umrah', icon: 'üè®', desc: 'Hotel di Mekkah & Madinah' },
        { name: 'Transportasi Bus', icon: 'üöå', desc: 'Mobilitas jamaah antar lokasi' },
        { name: 'Tiket Kereta Cepat', icon: 'üöÑ', desc: 'Haramain High Speed Railway' },
        { name: 'Dapur & Restoran', icon: 'üçΩÔ∏è', desc: 'Katering halal berkualitas' }
      ];

      // ============ RENDER OVERVIEW ============
      const renderOverview = () => (
        <div className="space-y-8">
          {/* Live Forex Rate Banner */}
          <div className="bg-gradient-to-r from-purple-900/50 to-indigo-900/50 rounded-xl p-4 border border-purple-700/50 flex items-center justify-between">
            <div className="flex items-center gap-3">
              <span className="text-2xl">üí±</span>
              <div>
                <div className="text-white font-semibold">Kurs SAR ‚Üí IDR (Live)</div>
                <div className="text-purple-300 text-sm">
                  {forexRate.loading ? 'Memuat...' : `Update: ${forexRate.lastUpdate}`}
                </div>
              </div>
            </div>
            <div className="text-right">
              <div className="text-3xl font-bold text-white">
                {forexRate.loading ? '...' : `Rp ${new Intl.NumberFormat('id-ID').format(forexRate.rate)}`}
              </div>
              <div className="text-purple-300 text-sm">per 1 SAR</div>
            </div>
          </div>

          {/* Executive Summary Card */}
          <div className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-8 border border-slate-700 shadow-2xl">
            <div className="flex items-start gap-6">
              <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-teal-500 to-emerald-600 flex items-center justify-center text-3xl shadow-lg">üèõÔ∏è</div>
              <div className="flex-1">
                <h2 className="text-2xl font-bold text-white mb-2">BPKH Limited RAG Agentic AI Platform</h2>
                <p className="text-slate-300 text-lg leading-relaxed">
                  Solusi terintegrasi berbasis <span className="text-teal-400 font-semibold">Retrieval-Augmented Generation</span> dengan
                  arsitektur <span className="text-amber-400 font-semibold">Multi-Agent</span> untuk transformasi digital layanan
                  jamaah haji/umrah di Arab Saudi.
                </p>
              </div>
            </div>
          </div>

          {/* Interactive Demo Buttons */}
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <button
              onClick={() => setShowChatbot(true)}
              className="bg-gradient-to-r from-teal-600 to-emerald-600 hover:from-teal-500 hover:to-emerald-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-teal-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">ü§ñ</span>
                <div>
                  <div className="text-white font-bold">AI Chatbot</div>
                  <div className="text-teal-100 text-xs">Groq Llama 3.3 70B</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowWhatsApp(true)}
              className="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-green-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">üí¨</span>
                <div>
                  <div className="text-white font-bold">WhatsApp Bot</div>
                  <div className="text-green-100 text-xs">Bilingual AR-ID Demo</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowCharts(true)}
              className="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-indigo-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">üìä</span>
                <div>
                  <div className="text-white font-bold">Live Charts</div>
                  <div className="text-indigo-100 text-xs">KPI & Budget Analytics</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowMap(true)}
              className="bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-cyan-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">üó∫Ô∏è</span>
                <div>
                  <div className="text-white font-bold">Peta Hotel</div>
                  <div className="text-cyan-100 text-xs">Lokasi dekat Masjidil Haram</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowQR(true)}
              className="bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-amber-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">üé´</span>
                <div>
                  <div className="text-white font-bold">QR Booking</div>
                  <div className="text-amber-100 text-xs">Generate konfirmasi</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowPrayer(true)}
              className="bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-emerald-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">üåô</span>
                <div>
                  <div className="text-white font-bold">Jadwal Sholat</div>
                  <div className="text-emerald-100 text-xs">Mekkah real-time</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowWeather(true)}
              className="bg-gradient-to-r from-blue-600 to-sky-600 hover:from-blue-500 hover:to-sky-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-blue-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">‚òÅÔ∏è</span>
                <div>
                  <div className="text-white font-bold">Cuaca Live</div>
                  <div className="text-blue-100 text-xs">Mekkah & Madinah</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowCalculator(true)}
              className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-purple-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">üí±</span>
                <div>
                  <div className="text-white font-bold">Kalkulator Kurs</div>
                  <div className="text-purple-100 text-xs">SAR ‚Üî IDR</div>
                </div>
              </div>
            </button>
            <button
              onClick={() => setShowHijri(true)}
              className="bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500 rounded-xl p-5 text-left transition-all hover:scale-[1.02] border border-yellow-500/30"
            >
              <div className="flex items-center gap-4">
                <span className="text-3xl">üóìÔ∏è</span>
                <div>
                  <div className="text-white font-bold">Kalender Hijriyah</div>
                  <div className="text-yellow-100 text-xs">Tanggal penting Islam</div>
                </div>
              </div>
            </button>
          </div>

          {/* Portfolio Integration */}
          <div>
            <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
              <span className="w-8 h-8 rounded-lg bg-amber-500/20 flex items-center justify-center text-amber-400">üéØ</span>
              Integrasi Portofolio Layanan
            </h3>
            <div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
              {portfolioServices.map((service, idx) => (
                <div key={idx} className="bg-slate-800/50 rounded-xl p-5 border border-slate-700 hover:border-teal-500/50 transition-all duration-300 hover:transform hover:scale-105">
                  <div className="text-3xl mb-3">{service.icon}</div>
                  <h4 className="font-semibold text-white text-sm mb-1">{service.name}</h4>
                  <p className="text-slate-400 text-xs">{service.desc}</p>
                </div>
              ))}
            </div>
          </div>

          {/* Key Benefits with Live Data */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div className="bg-gradient-to-br from-indigo-900/50 to-indigo-800/30 rounded-xl p-6 border border-indigo-700/50">
              <div className="text-4xl font-bold text-indigo-400 mb-2">85%</div>
              <div className="text-white font-medium">Efisiensi Layanan</div>
              <div className="text-slate-400 text-sm mt-1">Otomasi respons bilingual 24/7</div>
            </div>
            <div className="bg-gradient-to-br from-amber-900/50 to-amber-800/30 rounded-xl p-6 border border-amber-700/50">
              <div className="text-4xl font-bold text-amber-400 mb-2">
                {forexRate.loading ? '...' : `${(forexRate.rate / 1000).toFixed(1)}K`}
              </div>
              <div className="text-white font-medium">IDR/SAR Live</div>
              <div className="text-slate-400 text-sm mt-1">Real-time exchange rate</div>
            </div>
            <div className="bg-gradient-to-br from-emerald-900/50 to-emerald-800/30 rounded-xl p-6 border border-emerald-700/50">
              <div className="text-4xl font-bold text-emerald-400 mb-2">Zero</div>
              <div className="text-white font-medium">Paper Process</div>
              <div className="text-slate-400 text-sm mt-1">Full digitalisasi Arab-Indonesia</div>
            </div>
          </div>

          {/* Architecture Diagram */}
          <div className="bg-slate-800/50 rounded-2xl p-6 border border-slate-700">
            <h3 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
              <span className="w-8 h-8 rounded-lg bg-teal-500/20 flex items-center justify-center text-teal-400">‚öôÔ∏è</span>
              High-Level Architecture
            </h3>
            <div className="relative">
              <svg viewBox="0 0 800 400" className="w-full h-auto">
                <defs>
                  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#334155" strokeWidth="0.5" opacity="0.5" />
                  </pattern>
                  <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stopColor="#0D9488" stopOpacity="0.8" />
                    <stop offset="100%" stopColor="#059669" stopOpacity="0.8" />
                  </linearGradient>
                  <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stopColor="#6366F1" stopOpacity="0.8" />
                    <stop offset="100%" stopColor="#4F46E5" stopOpacity="0.8" />
                  </linearGradient>
                  <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stopColor="#F59E0B" stopOpacity="0.8" />
                    <stop offset="100%" stopColor="#D97706" stopOpacity="0.8" />
                  </linearGradient>
                </defs>
                <rect width="800" height="400" fill="url(#grid)" />
                <g transform="translate(30, 30)">
                  <rect x="0" y="0" width="140" height="340" rx="8" fill="#1E293B" stroke="#475569" />
                  <text x="70" y="25" textAnchor="middle" fill="#94A3B8" fontSize="12" fontWeight="bold">DATA SOURCES</text>
                  <rect x="10" y="40" width="120" height="45" rx="6" fill="#0F172A" stroke="#334155" />
                  <text x="70" y="60" textAnchor="middle" fill="#F59E0B" fontSize="11">üìä ERP/SAP</text>
                  <text x="70" y="75" textAnchor="middle" fill="#64748B" fontSize="9">Financial Data</text>
                  <rect x="10" y="95" width="120" height="45" rx="6" fill="#0F172A" stroke="#334155" />
                  <text x="70" y="115" textAnchor="middle" fill="#10B981" fontSize="11">üìÑ Documents</text>
                  <text x="70" y="130" textAnchor="middle" fill="#64748B" fontSize="9">AR/ID Contracts</text>
                  <rect x="10" y="150" width="120" height="45" rx="6" fill="#0F172A" stroke="#334155" />
                  <text x="70" y="170" textAnchor="middle" fill="#6366F1" fontSize="11">üéß CRM</text>
                  <text x="70" y="185" textAnchor="middle" fill="#64748B" fontSize="9">Jamaah/Mitra</text>
                  <rect x="10" y="205" width="120" height="45" rx="6" fill="#0F172A" stroke="#334155" />
                  <text x="70" y="225" textAnchor="middle" fill="#EF4444" fontSize="11">üë• HRIS</text>
                  <text x="70" y="240" textAnchor="middle" fill="#64748B" fontSize="9">Employee Data</text>
                  <rect x="10" y="260" width="120" height="45" rx="6" fill="#0F172A" stroke="#334155" />
                  <text x="70" y="280" textAnchor="middle" fill="#8B5CF6" fontSize="11">üåê External APIs</text>
                  <text x="70" y="295" textAnchor="middle" fill="#64748B" fontSize="9">FX Rate, Weather</text>
                </g>
                <g transform="translate(200, 30)">
                  <rect x="0" y="0" width="180" height="340" rx="8" fill="url(#grad1)" fillOpacity="0.1" stroke="#0D9488" />
                  <text x="90" y="25" textAnchor="middle" fill="#0D9488" fontSize="12" fontWeight="bold">RAG CORE ENGINE</text>
                  <rect x="10" y="45" width="160" height="60" rx="6" fill="#0F172A" stroke="#0D9488" />
                  <text x="90" y="65" textAnchor="middle" fill="#5EEAD4" fontSize="11" fontWeight="bold">Vector Store</text>
                  <text x="90" y="82" textAnchor="middle" fill="#64748B" fontSize="9">Supabase pgvector</text>
                  <text x="90" y="95" textAnchor="middle" fill="#64748B" fontSize="9">Multi-lingual Embeddings</text>
                  <rect x="10" y="115" width="160" height="60" rx="6" fill="#0F172A" stroke="#0D9488" />
                  <text x="90" y="135" textAnchor="middle" fill="#5EEAD4" fontSize="11" fontWeight="bold">Document Processor</text>
                  <text x="90" y="152" textAnchor="middle" fill="#64748B" fontSize="9">Chunking + Indexing</text>
                  <text x="90" y="165" textAnchor="middle" fill="#64748B" fontSize="9">Arabic-Indonesian OCR</text>
                  <rect x="10" y="185" width="160" height="60" rx="6" fill="#0F172A" stroke="#0D9488" />
                  <text x="90" y="205" textAnchor="middle" fill="#5EEAD4" fontSize="11" fontWeight="bold">Retrieval Engine</text>
                  <text x="90" y="222" textAnchor="middle" fill="#64748B" fontSize="9">Hybrid Search</text>
                  <text x="90" y="235" textAnchor="middle" fill="#64748B" fontSize="9">Semantic + BM25</text>
                  <rect x="10" y="255" width="160" height="60" rx="6" fill="#0F172A" stroke="#0D9488" />
                  <text x="90" y="275" textAnchor="middle" fill="#5EEAD4" fontSize="11" fontWeight="bold">Re-ranking</text>
                  <text x="90" y="292" textAnchor="middle" fill="#64748B" fontSize="9">Cross-Encoder</text>
                  <text x="90" y="305" textAnchor="middle" fill="#64748B" fontSize="9">Context Relevance</text>
                </g>
                <g transform="translate(410, 30)">
                  <rect x="0" y="0" width="180" height="340" rx="8" fill="url(#grad2)" fillOpacity="0.1" stroke="#6366F1" />
                  <text x="90" y="25" textAnchor="middle" fill="#6366F1" fontSize="12" fontWeight="bold">AGENTIC AI LAYER</text>
                  <rect x="10" y="45" width="160" height="50" rx="6" fill="#0F172A" stroke="#6366F1" />
                  <text x="90" y="65" textAnchor="middle" fill="#A5B4FC" fontSize="11" fontWeight="bold">ü§ñ Orchestrator Agent</text>
                  <text x="90" y="82" textAnchor="middle" fill="#64748B" fontSize="9">Task Planning & Routing</text>
                  <rect x="10" y="105" width="75" height="45" rx="6" fill="#0F172A" stroke="#818CF8" />
                  <text x="47" y="125" textAnchor="middle" fill="#C7D2FE" fontSize="9">Customer</text>
                  <text x="47" y="140" textAnchor="middle" fill="#C7D2FE" fontSize="9">Agent</text>
                  <rect x="95" y="105" width="75" height="45" rx="6" fill="#0F172A" stroke="#818CF8" />
                  <text x="132" y="125" textAnchor="middle" fill="#C7D2FE" fontSize="9">Planning</text>
                  <text x="132" y="140" textAnchor="middle" fill="#C7D2FE" fontSize="9">Agent</text>
                  <rect x="10" y="160" width="75" height="45" rx="6" fill="#0F172A" stroke="#818CF8" />
                  <text x="47" y="180" textAnchor="middle" fill="#C7D2FE" fontSize="9">Performance</text>
                  <text x="47" y="195" textAnchor="middle" fill="#C7D2FE" fontSize="9">Agent</text>
                  <rect x="95" y="160" width="75" height="45" rx="6" fill="#0F172A" stroke="#818CF8" />
                  <text x="132" y="180" textAnchor="middle" fill="#C7D2FE" fontSize="9">Document</text>
                  <text x="132" y="195" textAnchor="middle" fill="#C7D2FE" fontSize="9">Agent</text>
                  <rect x="10" y="215" width="160" height="50" rx="6" fill="#0F172A" stroke="#6366F1" />
                  <text x="90" y="235" textAnchor="middle" fill="#A5B4FC" fontSize="11" fontWeight="bold">üîß Tool Registry</text>
                  <text x="90" y="252" textAnchor="middle" fill="#64748B" fontSize="9">API Connectors + Functions</text>
                  <rect x="10" y="275" width="160" height="50" rx="6" fill="#0F172A" stroke="#6366F1" />
                  <text x="90" y="295" textAnchor="middle" fill="#A5B4FC" fontSize="11" fontWeight="bold">üíæ Memory Store</text>
                  <text x="90" y="312" textAnchor="middle" fill="#64748B" fontSize="9">Conversation + Context</text>
                </g>
                <g transform="translate(620, 30)">
                  <rect x="0" y="0" width="150" height="340" rx="8" fill="url(#grad3)" fillOpacity="0.1" stroke="#F59E0B" />
                  <text x="75" y="25" textAnchor="middle" fill="#F59E0B" fontSize="12" fontWeight="bold">INTERFACES</text>
                  <rect x="10" y="45" width="130" height="55" rx="6" fill="#0F172A" stroke="#F59E0B" />
                  <text x="75" y="65" textAnchor="middle" fill="#FCD34D" fontSize="11">üí¨ WhatsApp Bot</text>
                  <text x="75" y="82" textAnchor="middle" fill="#64748B" fontSize="9">Jamaah & Mitra</text>
                  <text x="75" y="95" textAnchor="middle" fill="#64748B" fontSize="8">AR + ID Support</text>
                  <rect x="10" y="110" width="130" height="55" rx="6" fill="#0F172A" stroke="#F59E0B" />
                  <text x="75" y="130" textAnchor="middle" fill="#FCD34D" fontSize="11">üìä Dashboard</text>
                  <text x="75" y="147" textAnchor="middle" fill="#64748B" fontSize="9">Management View</text>
                  <text x="75" y="160" textAnchor="middle" fill="#64748B" fontSize="8">Real-time Analytics</text>
                  <rect x="10" y="175" width="130" height="55" rx="6" fill="#0F172A" stroke="#F59E0B" />
                  <text x="75" y="195" textAnchor="middle" fill="#FCD34D" fontSize="11">üåê Web Portal</text>
                  <text x="75" y="212" textAnchor="middle" fill="#64748B" fontSize="9">Self-Service</text>
                  <text x="75" y="225" textAnchor="middle" fill="#64748B" fontSize="8">Order & Tracking</text>
                  <rect x="10" y="240" width="130" height="55" rx="6" fill="#0F172A" stroke="#F59E0B" />
                  <text x="75" y="260" textAnchor="middle" fill="#FCD34D" fontSize="11">üì± Mobile App</text>
                  <text x="75" y="277" textAnchor="middle" fill="#64748B" fontSize="9">Field Operations</text>
                  <text x="75" y="290" textAnchor="middle" fill="#64748B" fontSize="8">Offline Support</text>
                  <rect x="10" y="305" width="130" height="30" rx="6" fill="#0F172A" stroke="#F59E0B" />
                  <text x="75" y="325" textAnchor="middle" fill="#FCD34D" fontSize="11">üîó API Gateway</text>
                </g>
                <g stroke="#475569" strokeWidth="1.5" fill="none" strokeDasharray="5,3">
                  <path d="M 170 200 L 200 200" />
                  <path d="M 380 200 L 410 200" />
                  <path d="M 590 200 L 620 200" />
                </g>
                <g fill="#0D9488">
                  <polygon points="200,195 200,205 210,200" />
                  <polygon points="410,195 410,205 420,200" />
                  <polygon points="620,195 620,205 630,200" />
                </g>
              </svg>
            </div>
          </div>

          {/* Tech Stack */}
          <div className="bg-slate-800/50 rounded-2xl p-6 border border-slate-700">
            <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
              <span className="w-8 h-8 rounded-lg bg-indigo-500/20 flex items-center justify-center text-indigo-400">üõ†Ô∏è</span>
              Technology Stack (Zero/Low Cost Optimized)
            </h3>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
              <div className="bg-slate-900/50 rounded-lg p-4">
                <div className="text-sm text-slate-400 mb-2">LLM Provider</div>
                <div className="text-white font-medium">Groq API (Free)</div>
                <div className="text-xs text-teal-400">Llama 3.3 70B</div>
              </div>
              <div className="bg-slate-900/50 rounded-lg p-4">
                <div className="text-sm text-slate-400 mb-2">Vector DB</div>
                <div className="text-white font-medium">Supabase pgvector</div>
                <div className="text-xs text-teal-400">500MB Free Tier</div>
              </div>
              <div className="bg-slate-900/50 rounded-lg p-4">
                <div className="text-sm text-slate-400 mb-2">Compute</div>
                <div className="text-white font-medium">Cloudflare Workers</div>
                <div className="text-xs text-teal-400">100K req/day Free</div>
              </div>
              <div className="bg-slate-900/50 rounded-lg p-4">
                <div className="text-sm text-slate-400 mb-2">Orchestration</div>
                <div className="text-white font-medium">n8n Self-hosted</div>
                <div className="text-xs text-teal-400">Unlimited Workflows</div>
              </div>
            </div>
          </div>
        </div>
      );

      // ============ RENDER CUSTOMER SERVICE ============
      const renderCustomerService = () => (
        <div className="space-y-6">
          <div className="bg-gradient-to-br from-indigo-900/50 to-slate-900 rounded-2xl p-6 border border-indigo-700/50">
            <div className="flex items-center gap-4 mb-6">
              <div className="w-14 h-14 rounded-xl bg-indigo-500 flex items-center justify-center text-2xl shadow-lg">üéß</div>
              <div>
                <h2 className="text-2xl font-bold text-white">Automated Bilingual Customer Service</h2>
                <p className="text-indigo-300">Transformasi layanan jamaah/mitra di KSA dengan AI bilingual AR-ID</p>
              </div>
            </div>

            {/* Demo Buttons */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
              <button
                onClick={() => setShowChatbot(true)}
                className="bg-indigo-600 hover:bg-indigo-500 rounded-xl p-4 text-left transition-all flex items-center gap-3"
              >
                <span className="text-3xl">ü§ñ</span>
                <div>
                  <div className="text-white font-semibold">Coba AI Chatbot Live</div>
                  <div className="text-indigo-200 text-sm">Tanya dalam bahasa apapun</div>
                </div>
              </button>
              <button
                onClick={() => setShowWhatsApp(true)}
                className="bg-green-600 hover:bg-green-500 rounded-xl p-4 text-left transition-all flex items-center gap-3"
              >
                <span className="text-3xl">üí¨</span>
                <div>
                  <div className="text-white font-semibold">Demo WhatsApp Bilingual</div>
                  <div className="text-green-200 text-sm">Simulasi percakapan AR-ID</div>
                </div>
              </button>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <div className="space-y-4">
                <h3 className="text-lg font-semibold text-white flex items-center gap-2">
                  <span className="text-indigo-400">üìã</span> Use Cases
                </h3>
                <div className="space-y-3">
                  {[
                    { title: 'Reservasi Akomodasi', desc: 'Booking hotel Mekkah/Madinah via WhatsApp', icon: 'üè®' },
                    { title: 'Pemesanan Transportasi', desc: 'Bus shuttle & tiket Haramain', icon: 'üöå' },
                    { title: 'Layanan Katering', desc: 'Menu harian & pesanan khusus', icon: 'üçΩÔ∏è' },
                    { title: 'Komplain & Feedback', desc: 'Handling keluhan real-time', icon: 'üìû' },
                    { title: 'Info Jadwal Haji', desc: 'Manasik & itinerary jamaah', icon: 'üìÖ' }
                  ].map((item, idx) => (
                    <div key={idx} className="bg-slate-800/50 rounded-lg p-4 border border-slate-700 flex items-start gap-3">
                      <span className="text-2xl">{item.icon}</span>
                      <div>
                        <div className="text-white font-medium">{item.title}</div>
                        <div className="text-slate-400 text-sm">{item.desc}</div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="space-y-4">
                <h3 className="text-lg font-semibold text-white flex items-center gap-2">
                  <span className="text-indigo-400">ü§ñ</span> Multi-Agent Architecture
                </h3>
                <div className="bg-slate-900/50 rounded-xl p-4 border border-indigo-600/30">
                  <div className="space-y-3">
                    {[
                      { name: 'Language Router Agent', desc: 'Deteksi bahasa ‚Üí Arabic/Indonesian/English' },
                      { name: 'Intent Classifier Agent', desc: 'Kategorisasi: Booking | Info | Complaint' },
                      { name: 'Knowledge Retrieval Agent', desc: 'RAG dari KB: SOP, FAQ, Tarif, Jadwal' },
                      { name: 'Action Executor Agent', desc: 'API calls: Booking, Update, Escalate' },
                      { name: 'Response Generator Agent', desc: 'Natural response + formatting' }
                    ].map((item, idx) => (
                      <div key={idx} className="bg-indigo-900/30 rounded-lg p-3">
                        <div className="text-indigo-300 font-semibold text-sm">{item.name}</div>
                        <div className="text-slate-400 text-xs mt-1">{item.desc}</div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

      // ============ RENDER CORPORATE PLANNING ============
      const renderCorporatePlanning = () => (
        <div className="space-y-6">
          <div className="bg-gradient-to-br from-amber-900/50 to-slate-900 rounded-2xl p-6 border border-amber-700/50">
            <div className="flex items-center gap-4 mb-6">
              <div className="w-14 h-14 rounded-xl bg-amber-500 flex items-center justify-center text-2xl shadow-lg">üìà</div>
              <div>
                <h2 className="text-2xl font-bold text-white">Intelligent Corporate Planning</h2>
                <p className="text-amber-300">Dashboard realisasi otomatis dengan konversi IDR-SAR real-time</p>
              </div>
            </div>

            {/* Live Rate Banner */}
            <div className="bg-gradient-to-r from-purple-900/50 to-amber-900/50 rounded-xl p-4 border border-purple-700/50 mb-6">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <span className="text-2xl">üí±</span>
                  <div>
                    <div className="text-white font-semibold">Live Exchange Rate</div>
                    <div className="text-purple-300 text-sm">{forexRate.loading ? 'Loading...' : `Updated: ${forexRate.lastUpdate}`}</div>
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-2xl font-bold text-white">1 SAR = Rp {new Intl.NumberFormat('id-ID').format(forexRate.rate)}</div>
                </div>
              </div>
            </div>

            <div className="bg-slate-900/50 rounded-xl p-6 border border-slate-700 mb-6">
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div className="bg-gradient-to-br from-emerald-900/50 to-emerald-800/30 rounded-lg p-4">
                  <div className="text-slate-400 text-xs mb-1">Total Budget (SAR)</div>
                  <div className="text-2xl font-bold text-emerald-400">125.8M</div>
                  <div className="text-emerald-300 text-xs">‚âà Rp {formatIDR(125800000)} </div>
                </div>
                <div className="bg-gradient-to-br from-blue-900/50 to-blue-800/30 rounded-lg p-4">
                  <div className="text-slate-400 text-xs mb-1">Realisasi YTD</div>
                  <div className="text-2xl font-bold text-blue-400">87.2M</div>
                  <div className="text-blue-300 text-xs">69.3% dari budget</div>
                </div>
                <div className="bg-gradient-to-br from-purple-900/50 to-purple-800/30 rounded-lg p-4">
                  <div className="text-slate-400 text-xs mb-1">FX Rate (Live)</div>
                  <div className="text-2xl font-bold text-purple-400">{forexRate.rate.toLocaleString()}</div>
                  <div className="text-purple-300 text-xs flex items-center gap-1">
                    <span className="w-2 h-2 bg-green-400 rounded-full pulse-dot"></span> Real-time
                  </div>
                </div>
                <div className="bg-gradient-to-br from-rose-900/50 to-rose-800/30 rounded-lg p-4">
                  <div className="text-slate-400 text-xs mb-1">Variance</div>
                  <div className="text-2xl font-bold text-rose-400">-5.2%</div>
                  <div className="text-rose-300 text-xs">Under budget</div>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="bg-slate-800/50 rounded-lg p-4">
                  <div className="text-white font-medium mb-3">Realisasi per Lini Bisnis</div>
                  <div className="space-y-3">
                    {[
                      { name: 'Akomodasi', budget: 45, actual: 42, color: 'bg-emerald-500' },
                      { name: 'Transportasi', budget: 30, actual: 28, color: 'bg-blue-500' },
                      { name: 'Katering', budget: 35, actual: 25, color: 'bg-amber-500' },
                      { name: 'Tiket Kereta', budget: 15.8, actual: 12.2, color: 'bg-purple-500' }
                    ].map((item, idx) => (
                      <div key={idx}>
                        <div className="flex justify-between text-sm mb-1">
                          <span className="text-slate-300">{item.name}</span>
                          <span className="text-slate-400">{item.actual}M / {item.budget}M SAR</span>
                        </div>
                        <div className="h-2 bg-slate-700 rounded-full overflow-hidden">
                          <div className={`h-full ${item.color} rounded-full transition-all duration-500`} style={{ width: `${(item.actual / item.budget) * 100}%` }} />
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="bg-slate-800/50 rounded-lg p-4">
                  <div className="text-white font-medium mb-3">AI-Generated Insights</div>
                  <div className="space-y-2 text-sm">
                    <div className="bg-amber-900/30 rounded-lg p-3 border-l-4 border-amber-500">
                      <div className="text-amber-300 font-medium">‚ö†Ô∏è Alert: Katering</div>
                      <div className="text-slate-400">Realisasi 71.4% - proyeksi tidak tercapai Q4</div>
                    </div>
                    <div className="bg-emerald-900/30 rounded-lg p-3 border-l-4 border-emerald-500">
                      <div className="text-emerald-300 font-medium">‚úÖ On Track: Akomodasi</div>
                      <div className="text-slate-400">93.3% realisasi, sesuai proyeksi musim haji</div>
                    </div>
                    <div className="bg-blue-900/30 rounded-lg p-3 border-l-4 border-blue-500">
                      <div className="text-blue-300 font-medium">üìä Rekomendasi</div>
                      <div className="text-slate-400">Realokasi dari Akomodasi ke Katering</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

      // ============ RENDER PERFORMANCE ============
      const renderPerformanceMonitoring = () => (
        <div className="space-y-6">
          <div className="bg-gradient-to-br from-red-900/50 to-slate-900 rounded-2xl p-6 border border-red-700/50">
            <div className="flex items-center gap-4 mb-6">
              <div className="w-14 h-14 rounded-xl bg-red-500 flex items-center justify-center text-2xl shadow-lg">üéØ</div>
              <div>
                <h2 className="text-2xl font-bold text-white">AI-Based Performance Monitoring</h2>
                <p className="text-red-300">Pemantauan kinerja individu yang objektif & data-driven</p>
              </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
              <div className="bg-slate-800/50 rounded-xl p-5 border border-slate-700">
                <h3 className="text-white font-semibold mb-4 flex items-center gap-2">
                  <span className="text-red-400">üìä</span> Multi-Dimensional KPI Framework
                </h3>
                <div className="space-y-3">
                  {[
                    { category: 'Operasional', kpis: ['SLA Achievement', 'Response Time', 'Error Rate'], weight: 40 },
                    { category: 'Finansial', kpis: ['Cost Efficiency', 'Revenue Target', 'Budget Adherence'], weight: 30 },
                    { category: 'Customer', kpis: ['CSAT Score', 'Complaint Resolution', 'Repeat Business'], weight: 20 },
                    { category: 'Development', kpis: ['Training Completion', 'Skill Assessment', 'Innovation'], weight: 10 }
                  ].map((item, idx) => (
                    <div key={idx} className="bg-slate-900/50 rounded-lg p-3">
                      <div className="flex justify-between items-center mb-2">
                        <span className="text-white font-medium">{item.category}</span>
                        <span className="text-slate-400 text-sm">{item.weight}% weight</span>
                      </div>
                      <div className="flex flex-wrap gap-1">
                        {item.kpis.map((kpi, i) => (
                          <span key={i} className="bg-red-900/30 text-red-300 text-xs px-2 py-1 rounded">{kpi}</span>
                        ))}
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-slate-800/50 rounded-xl p-5 border border-slate-700">
                <h3 className="text-white font-semibold mb-4 flex items-center gap-2">
                  <span className="text-red-400">üë§</span> Individual Performance Card
                </h3>
                <div className="bg-slate-900/50 rounded-lg p-4">
                  <div className="flex items-center gap-4 mb-4">
                    <div className="w-12 h-12 rounded-full bg-gradient-to-br from-red-500 to-amber-500 flex items-center justify-center text-white font-bold">AM</div>
                    <div>
                      <div className="text-white font-medium">Ahmad Muhammad</div>
                      <div className="text-slate-400 text-sm">Operations Manager - Akomodasi</div>
                    </div>
                    <div className="ml-auto text-right">
                      <div className="text-3xl font-bold text-emerald-400">87</div>
                      <div className="text-slate-400 text-xs">Overall Score</div>
                    </div>
                  </div>
                  <div className="space-y-2">
                    {[
                      { name: 'Operasional', score: 92, color: 'bg-emerald-500' },
                      { name: 'Finansial', score: 85, color: 'bg-blue-500' },
                      { name: 'Customer', score: 88, color: 'bg-amber-500' },
                      { name: 'Development', score: 75, color: 'bg-purple-500' }
                    ].map((item, idx) => (
                      <div key={idx} className="flex items-center gap-3">
                        <span className="text-slate-400 text-sm w-24">{item.name}</span>
                        <div className="flex-1 h-2 bg-slate-700 rounded-full overflow-hidden">
                          <div className={`h-full ${item.color} rounded-full`} style={{ width: `${item.score}%` }} />
                        </div>
                        <span className="text-white text-sm w-8">{item.score}</span>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

      // ============ RENDER DOCUMENT INTELLIGENCE ============
      const renderDocumentIntelligence = () => (
        <div className="space-y-6">
          <div className="bg-gradient-to-br from-emerald-900/50 to-slate-900 rounded-2xl p-6 border border-emerald-700/50">
            <div className="flex items-center gap-4 mb-6">
              <div className="w-14 h-14 rounded-xl bg-emerald-500 flex items-center justify-center text-2xl shadow-lg">üìÑ</div>
              <div>
                <h2 className="text-2xl font-bold text-white">Bilingual Document Intelligence</h2>
                <p className="text-emerald-300">Digitalisasi & otomasi surat-menyurat Arab-Indonesia</p>
              </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
              <div className="bg-slate-800/50 rounded-xl p-5 border border-slate-700">
                <h3 className="text-white font-semibold mb-4 flex items-center gap-2">
                  <span className="text-emerald-400">üìÅ</span> Supported Document Types
                </h3>
                <div className="grid grid-cols-2 gap-3">
                  {[
                    { type: 'Kontrak Kerjasama', format: 'AR + ID', icon: 'üìù' },
                    { type: 'Invoice & Tagihan', format: 'AR', icon: 'üíµ' },
                    { type: 'Surat Perjanjian', format: 'AR + ID', icon: 'ü§ù' },
                    { type: 'Dokumen Perizinan', format: 'AR', icon: 'üìã' },
                    { type: 'Laporan Operasional', format: 'AR + ID', icon: 'üìä' },
                    { type: 'Korespondensi Resmi', format: 'AR + ID', icon: '‚úâÔ∏è' }
                  ].map((item, idx) => (
                    <div key={idx} className="bg-slate-900/50 rounded-lg p-3 flex items-center gap-2">
                      <span className="text-xl">{item.icon}</span>
                      <div>
                        <div className="text-white text-sm font-medium">{item.type}</div>
                        <div className="text-emerald-400 text-xs">{item.format}</div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-slate-800/50 rounded-xl p-5 border border-slate-700">
                <h3 className="text-white font-semibold mb-4 flex items-center gap-2">
                  <span className="text-emerald-400">‚öôÔ∏è</span> Processing Pipeline
                </h3>
                <div className="space-y-3">
                  {[
                    { step: 1, name: 'Document Ingestion', desc: 'Upload via API/Email/Portal', icon: 'üì•' },
                    { step: 2, name: 'OCR + Language Detection', desc: 'Arabic/Indonesian extraction', icon: 'üëÅÔ∏è' },
                    { step: 3, name: 'Entity Extraction', desc: 'NER: Nama, Tanggal, Nominal', icon: 'üè∑Ô∏è' },
                    { step: 4, name: 'Classification & Routing', desc: 'Auto-kategorisasi & assign PIC', icon: 'üîÄ' },
                    { step: 5, name: 'Storage & Indexing', desc: 'Vector DB + metadata', icon: 'üíæ' }
                  ].map((item, idx) => (
                    <div key={idx} className="flex items-center gap-3 bg-slate-900/50 rounded-lg p-2">
                      <div className="w-6 h-6 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-400 text-xs font-bold">{item.step}</div>
                      <div className="flex-1">
                        <div className="text-white text-sm font-medium">{item.name}</div>
                        <div className="text-slate-400 text-xs">{item.desc}</div>
                      </div>
                      <span>{item.icon}</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      );

      // ============ RENDER IMPLEMENTATION ============
      const renderImplementation = () => (
        <div className="space-y-6">
          <div className="bg-gradient-to-br from-purple-900/50 to-slate-900 rounded-2xl p-6 border border-purple-700/50">
            <div className="flex items-center gap-4 mb-6">
              <div className="w-14 h-14 rounded-xl bg-purple-500 flex items-center justify-center text-2xl shadow-lg">üöÄ</div>
              <div>
                <h2 className="text-2xl font-bold text-white">Implementation Roadmap</h2>
                <p className="text-purple-300">Phased rollout dengan quick wins untuk stakeholder buy-in</p>
              </div>
            </div>

            <div className="relative">
              <div className="absolute left-8 top-0 bottom-0 w-0.5 bg-gradient-to-b from-purple-500 via-amber-500 to-emerald-500" />
              <div className="space-y-6">
                {[
                  { phase: 1, title: 'Foundation (Month 1-2)', color: 'purple', deliverables: ['Infrastructure setup (Cloudflare + Supabase)', 'Knowledge base seeding (FAQ, SOP)', 'Basic WhatsApp bot (ID only)', 'Document OCR pipeline (ID)'], wins: ['50% reduction in FAQ calls', 'Document search in <5 seconds', '24/7 automated responses'] },
                  { phase: 2, title: 'Enhancement (Month 3-4)', color: 'amber', deliverables: ['Arabic language support', 'Corporate planning dashboard', 'IDR-SAR real-time conversion', 'Booking system integration'], wins: ['Arabic customer support live', 'Real-time budget monitoring', 'Automated variance alerts'] },
                  { phase: 3, title: 'Full Platform (Month 5-6)', color: 'emerald', deliverables: ['Performance monitoring system', 'Full document intelligence (AR-ID)', 'Multi-agent orchestration', 'Mobile app deployment'], wins: ['85% automation rate', 'Objective performance reviews', 'Zero paper document process'] }
                ].map((p, idx) => (
                  <div key={idx} className="relative pl-20">
                    <div className={`absolute left-6 w-5 h-5 rounded-full bg-${p.color}-500 border-4 border-slate-900`} />
                    <div className={`bg-slate-800/50 rounded-xl p-5 border border-${p.color}-700/50`}>
                      <div className="flex items-center gap-3 mb-3">
                        <span className={`bg-${p.color}-500 text-white text-xs px-2 py-1 rounded font-bold`}>PHASE {p.phase}</span>
                        <span className="text-white font-semibold">{p.title}</span>
                      </div>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                          <div className={`text-${p.color}-300 text-sm font-medium mb-2`}>Deliverables</div>
                          <ul className="text-slate-300 text-sm space-y-1">
                            {p.deliverables.map((d, i) => <li key={i}>‚úì {d}</li>)}
                          </ul>
                        </div>
                        <div>
                          <div className={`text-${p.color}-300 text-sm font-medium mb-2`}>Quick Wins</div>
                          <ul className="text-slate-300 text-sm space-y-1">
                            {p.wins.map((w, i) => <li key={i}>üéØ {w}</li>)}
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* Cost Table */}
          <div className="bg-slate-800/50 rounded-2xl p-6 border border-slate-700">
            <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
              <span className="text-emerald-400">üí∞</span> Zero/Low Cost Architecture
            </h3>
            <div className="overflow-x-auto">
              <table className="w-full text-sm">
                <thead>
                  <tr className="border-b border-slate-700">
                    <th className="text-left py-3 px-4 text-slate-400">Component</th>
                    <th className="text-left py-3 px-4 text-slate-400">Provider</th>
                    <th className="text-left py-3 px-4 text-slate-400">Tier</th>
                    <th className="text-right py-3 px-4 text-slate-400">Monthly</th>
                  </tr>
                </thead>
                <tbody>
                  {[
                    { component: 'LLM API', provider: 'Groq', tier: 'Free (14,400 req/day)', cost: '$0' },
                    { component: 'Vector Database', provider: 'Supabase pgvector', tier: 'Free (500MB)', cost: '$0' },
                    { component: 'Compute', provider: 'Cloudflare Workers', tier: 'Free (100K req/day)', cost: '$0' },
                    { component: 'Workflow', provider: 'n8n Self-hosted', tier: 'Open Source', cost: '$0' },
                    { component: 'WhatsApp API', provider: 'Meta WABA', tier: 'Conversation-based', cost: '~$50' },
                    { component: 'Hosting', provider: 'Railway/Render', tier: 'Starter', cost: '~$5' }
                  ].map((item, idx) => (
                    <tr key={idx} className="border-b border-slate-800">
                      <td className="py-3 px-4 text-white">{item.component}</td>
                      <td className="py-3 px-4 text-slate-300">{item.provider}</td>
                      <td className="py-3 px-4 text-emerald-400">{item.tier}</td>
                      <td className="py-3 px-4 text-right text-white font-medium">{item.cost}</td>
                    </tr>
                  ))}
                  <tr className="bg-emerald-900/20">
                    <td colSpan="3" className="py-3 px-4 text-white font-bold">Total Estimated Monthly</td>
                    <td className="py-3 px-4 text-right text-emerald-400 font-bold text-lg">~$55</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      );

      const renderContent = () => {
        switch (activeModule) {
          case 'overview': return renderOverview();
          case 'customer': return renderCustomerService();
          case 'planning': return renderCorporatePlanning();
          case 'performance': return renderPerformanceMonitoring();
          case 'document': return renderDocumentIntelligence();
          case 'implementation': return renderImplementation();
          default: return renderOverview();
        }
      };

      return (
        <div className={`min-h-screen bg-slate-900 text-white transition-opacity duration-500 ${isLoaded ? 'opacity-100' : 'opacity-0'}`}>
          {/* Header */}
          <header className="bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800 border-b border-slate-700 sticky top-0 z-40">
            <div className="max-w-7xl mx-auto px-4 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-4">
                  <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-emerald-600 flex items-center justify-center text-xl font-bold shadow-lg">üèõÔ∏è</div>
                  <div>
                    <h1 className="text-xl font-bold text-white">BPKH Limited</h1>
                    <p className="text-sm text-slate-400">RAG Agentic AI Platform</p>
                  </div>
                </div>
                <div className="flex items-center gap-4">
                  <div className="hidden md:flex items-center gap-2 bg-slate-800/50 rounded-lg px-3 py-2">
                    <span className="w-2 h-2 bg-green-400 rounded-full pulse-dot"></span>
                    <span className="text-xs text-slate-400">SAR/IDR:</span>
                    <span className="text-xs text-teal-400 font-medium">{forexRate.rate.toLocaleString()}</span>
                  </div>
                </div>
              </div>
            </div>
          </header>

          {/* Navigation */}
          <nav className="bg-slate-800/50 border-b border-slate-700 overflow-x-auto">
            <div className="max-w-7xl mx-auto px-4">
              <div className="flex gap-1 py-2">
                {modules.map((module) => (
                  <button
                    key={module.id}
                    onClick={() => setActiveModule(module.id)}
                    className={`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium whitespace-nowrap transition-all duration-200 ${activeModule === module.id
                        ? 'bg-gradient-to-r from-teal-600 to-emerald-600 text-white shadow-lg'
                        : 'text-slate-400 hover:text-white hover:bg-slate-700/50'
                      }`}
                  >
                    <span>{module.icon}</span>
                    <span className="hidden sm:inline">{module.name}</span>
                  </button>
                ))}
              </div>
            </div>
          </nav>

          {/* Main Content */}
          <main className="max-w-7xl mx-auto px-4 py-8">
            {renderContent()}
          </main>

          {/* Footer */}
          <footer className="bg-slate-800/50 border-t border-slate-700 mt-12">
            <div className="max-w-7xl mx-auto px-4 py-6">
              <div className="flex flex-col md:flex-row items-center justify-between gap-4">
                <div className="text-slate-400 text-sm">¬© 2025 BPKH Limited - RAG Agentic AI Solution</div>
                <div className="flex items-center gap-4 text-sm">
                  <span className="text-slate-500">Prepared by:</span>
                  <span className="text-teal-400">MS Hadianto | Audit Committee BPKH</span>
                </div>
              </div>
            </div>
          </footer>

          {/* Floating Chat Button */}
          {!showChatbot && (
            <button
              onClick={() => setShowChatbot(true)}
              className="fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-teal-500 to-emerald-500 rounded-full shadow-lg flex items-center justify-center text-2xl hover:scale-110 transition-transform z-40"
            >
              ü§ñ
            </button>
          )}

          {/* Modals */}
          <AIChatbot isOpen={showChatbot} onClose={() => setShowChatbot(false)} />
          <WhatsAppSimulator isOpen={showWhatsApp} onClose={() => setShowWhatsApp(false)} />
          <LiveCharts isOpen={showCharts} onClose={() => setShowCharts(false)} />
          <HotelMap isOpen={showMap} onClose={() => setShowMap(false)} />
          <BookingQRCode isOpen={showQR} onClose={() => setShowQR(false)} />
          <PrayerTimeWidget isOpen={showPrayer} onClose={() => setShowPrayer(false)} />
          <WeatherWidget isOpen={showWeather} onClose={() => setShowWeather(false)} />
          <CurrencyCalculator isOpen={showCalculator} onClose={() => setShowCalculator(false)} forexRate={forexRate} />
          <HijriCalendar isOpen={showHijri} onClose={() => setShowHijri(false)} />
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<BPKHLimitedSolution />);
  </script>
</body>

</html>